!function(){return function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return r(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}}()({1:[function(e,t,n){"use strict";function o(){}function r(e,t,n,o){var r={listener:n,active:!0,type:t,once:o};e._events||(e._events=Object.create(null)),e._events[t]||(e._events[t]=[]),e._events[t].push(r)}function i(e,t){return e._events&&e._events[t]}o.prototype={emit:function(e){var t,n,o,r=i(this,e);if(!r)return this;for(arguments.length>1&&(t=[].slice.call(arguments,1)),n=0,o=r.length;n<o;++n)if(r[n].active&&(r[n].once&&(r[n].active=!1),!1===(t?r[n].listener.apply(this,t):r[n].listener.call(this))))return!1},off:function(e,t){var n,o;if(e){if(n=i(this,e))if(t)for(o=n.length-1;o>=0;--o)n[o].listener===t&&n[o].active&&(n[o].active=!1);else n.length=0}else this._events=null;return this},on:function(e,t){return r(this,e,t),this},once:function(e,t){return r(this,e,t,!0),this},constructor:o},t.exports=o},{}],2:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vertices"),i=e("../geometry/Vector"),s=e("../core/Sleeping"),a=(e("../render/Render"),e("../core/Common")),c=e("../geometry/Bounds"),l=e("../geometry/Axes");!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(t){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},o=a.extend(n,t);return e(o,t),o},o.nextGroup=function(e){return e?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var e=function(e,t){t=t||{},o.set(e,{bounds:e.bounds||c.create(e.vertices),positionPrev:e.positionPrev||i.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),r.rotate(e.vertices,e.angle,e.position),l.rotate(e.axes,e.angle),c.update(e.bounds,e.vertices,e.velocity),o.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||"#000",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};o.set=function(e,t,n){var r;for(r in"string"==typeof t&&(r=t,(t={})[r]=n),t)if(n=t[r],t.hasOwnProperty(r))switch(r){case"isStatic":o.setStatic(e,n);break;case"isSleeping":s.set(e,n);break;case"mass":o.setMass(e,n);break;case"density":o.setDensity(e,n);break;case"inertia":o.setInertia(e,n);break;case"vertices":o.setVertices(e,n);break;case"position":o.setPosition(e,n);break;case"angle":o.setAngle(e,n);break;case"velocity":o.setVelocity(e,n);break;case"angularVelocity":o.setAngularVelocity(e,n);break;case"parts":o.setParts(e,n);break;default:e[r]=n}},o.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var o=e.parts[n];o.isStatic=t,t?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,delete o._original)}},o.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},o.setDensity=function(e,t){o.setMass(e,t*e.area),e.density=t},o.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},o.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=r.create(t,e),e.axes=l.fromVertices(e.vertices),e.area=r.area(e.vertices),o.setMass(e,e.density*e.area);var n=r.centre(e.vertices);r.translate(e.vertices,n,-1),o.setInertia(e,o._inertiaScale*r.inertia(e.vertices,e.mass)),r.translate(e.vertices,e.position),c.update(e.bounds,e.vertices,e.velocity)},o.setParts=function(e,t,n){var i;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,i=0;i<t.length;i++){var s=t[i];s!==e&&(s.parent=e,e.parts.push(s))}if(1!==e.parts.length){if(n=void 0===n||n){var a=[];for(i=0;i<t.length;i++)a=a.concat(t[i].vertices);r.clockwiseSort(a);var c=r.hull(a),l=r.centre(c);o.setVertices(e,c),r.translate(e.vertices,l)}var u=o._totalProperties(e);e.area=u.area,e.parent=e,e.position.x=u.centre.x,e.position.y=u.centre.y,e.positionPrev.x=u.centre.x,e.positionPrev.y=u.centre.y,o.setMass(e,u.mass),o.setInertia(e,u.inertia),o.setPosition(e,u.centre)}},o.setPosition=function(e,t){var n=i.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var o=0;o<e.parts.length;o++){var s=e.parts[o];s.position.x+=n.x,s.position.y+=n.y,r.translate(s.vertices,n),c.update(s.bounds,s.vertices,e.velocity)}},o.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var o=0;o<e.parts.length;o++){var s=e.parts[o];s.angle+=n,r.rotate(s.vertices,n,e.position),l.rotate(s.axes,n),c.update(s.bounds,s.vertices,e.velocity),o>0&&i.rotateAbout(s.position,n,e.position,s.position)}},o.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=i.magnitude(e.velocity)},o.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},o.translate=function(e,t){o.setPosition(e,i.add(e.position,t))},o.rotate=function(e,t,n){if(n){var r=Math.cos(t),i=Math.sin(t),s=e.position.x-n.x,a=e.position.y-n.y;o.setPosition(e,{x:n.x+(s*r-a*i),y:n.y+(s*i+a*r)}),o.setAngle(e,e.angle+t)}else o.setAngle(e,e.angle+t)},o.scale=function(e,t,n,i){var s=0,a=0;i=i||e.position;for(var u=0;u<e.parts.length;u++){var f=e.parts[u];r.scale(f.vertices,t,n,i),f.axes=l.fromVertices(f.vertices),f.area=r.area(f.vertices),o.setMass(f,e.density*f.area),r.translate(f.vertices,{x:-f.position.x,y:-f.position.y}),o.setInertia(f,o._inertiaScale*r.inertia(f.vertices,f.mass)),r.translate(f.vertices,{x:f.position.x,y:f.position.y}),u>0&&(s+=f.area,a+=f.inertia),f.position.x=i.x+(f.position.x-i.x)*t,f.position.y=i.y+(f.position.y-i.y)*n,c.update(f.bounds,f.vertices,e.velocity)}e.parts.length>1&&(e.area=s,e.isStatic||(o.setMass(e,e.density*s),o.setInertia(e,a))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},o.update=function(e,t,n,o){var s=Math.pow(t*n*e.timeScale,2),a=1-e.frictionAir*n*e.timeScale,u=e.position.x-e.positionPrev.x,f=e.position.y-e.positionPrev.y;e.velocity.x=u*a*o+e.force.x/e.mass*s,e.velocity.y=f*a*o+e.force.y/e.mass*s,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*a*o+e.torque/e.inertia*s,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=i.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var p=0;p<e.parts.length;p++){var d=e.parts[p];r.translate(d.vertices,e.velocity),p>0&&(d.position.x+=e.velocity.x,d.position.y+=e.velocity.y),0!==e.angularVelocity&&(r.rotate(d.vertices,e.angularVelocity,e.position),l.rotate(d.axes,e.angularVelocity),p>0&&i.rotateAbout(d.position,e.angularVelocity,e.position,d.position)),c.update(d.bounds,d.vertices,e.velocity)}},o.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var o=t.x-e.position.x,r=t.y-e.position.y;e.torque+=o*n.y-r*n.x},o._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var o=e.parts[n],r=o.mass!==1/0?o.mass:1;t.mass+=r,t.area+=o.area,t.inertia+=o.inertia,t.centre=i.add(t.centre,i.mult(o.position,r))}return t.centre=i.div(t.centre,t.mass),t}}()},{"../core/Common":13,"../core/Sleeping":18,"../geometry/Axes":20,"../geometry/Bounds":21,"../geometry/Vector":22,"../geometry/Vertices":23,"../render/Render":24}],3:[function(e,t,n){var o={};t.exports=o;var r=e("../core/Events"),i=e("../core/Common"),s=e("../geometry/Bounds"),a=e("./Body");o.create=function(e){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},o.setModified=function(e,t,n,r){if(e.isModified=t,n&&e.parent&&o.setModified(e.parent,t,n,r),r)for(var i=0;i<e.composites.length;i++){var s=e.composites[i];o.setModified(s,t,n,r)}},o.add=function(e,t){var n=[].concat(t);r.trigger(e,"beforeAdd",{object:t});for(var s=0;s<n.length;s++){var a=n[s];switch(a.type){case"body":if(a.parent!==a){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,a);break;case"constraint":o.addConstraint(e,a);break;case"composite":o.addComposite(e,a);break;case"mouseConstraint":o.addConstraint(e,a.constraint)}}return r.trigger(e,"afterAdd",{object:t}),e},o.remove=function(e,t,n){var i=[].concat(t);r.trigger(e,"beforeRemove",{object:t});for(var s=0;s<i.length;s++){var a=i[s];switch(a.type){case"body":o.removeBody(e,a,n);break;case"constraint":o.removeConstraint(e,a,n);break;case"composite":o.removeComposite(e,a,n);break;case"mouseConstraint":o.removeConstraint(e,a.constraint)}}return r.trigger(e,"afterRemove",{object:t}),e},o.addComposite=function(e,t){return e.composites.push(t),t.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,t,n){var r=i.indexOf(e.composites,t);if(-1!==r&&(o.removeCompositeAt(e,r),o.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)o.removeComposite(e.composites[s],t,!0);return e},o.removeCompositeAt=function(e,t){return e.composites.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,t){return e.bodies.push(t),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,t,n){var r=i.indexOf(e.bodies,t);if(-1!==r&&(o.removeBodyAt(e,r),o.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)o.removeBody(e.composites[s],t,!0);return e},o.removeBodyAt=function(e,t){return e.bodies.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,t){return e.constraints.push(t),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,t,n){var r=i.indexOf(e.constraints,t);if(-1!==r&&o.removeConstraintAt(e,r),n)for(var s=0;s<e.composites.length;s++)o.removeConstraint(e.composites[s],t,!0);return e},o.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,t,n){if(n)for(var r=0;r<e.composites.length;r++)o.clear(e.composites[r],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(o.allBodies(e.composites[n]));return t},o.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(o.allConstraints(e.composites[n]));return t},o.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(o.allComposites(e.composites[n]));return t},o.get=function(e,t,n){var r,i;switch(n){case"body":r=o.allBodies(e);break;case"constraint":r=o.allConstraints(e);break;case"composite":r=o.allComposites(e).concat(e)}return r?0===(i=r.filter(function(e){return e.id.toString()===t.toString()})).length?null:i[0]:null},o.move=function(e,t,n){return o.remove(e,t),o.add(n,t),e},o.rebase=function(e){for(var t=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),n=0;n<t.length;n++)t[n].id=i.nextId();return o.setModified(e,!0,!0,!1),e},o.translate=function(e,t,n){for(var r=n?o.allBodies(e):e.bodies,i=0;i<r.length;i++)a.translate(r[i],t);return o.setModified(e,!0,!0,!1),e},o.rotate=function(e,t,n,r){for(var i=Math.cos(t),s=Math.sin(t),c=r?o.allBodies(e):e.bodies,l=0;l<c.length;l++){var u=c[l],f=u.position.x-n.x,p=u.position.y-n.y;a.setPosition(u,{x:n.x+(f*i-p*s),y:n.y+(f*s+p*i)}),a.rotate(u,t)}return o.setModified(e,!0,!0,!1),e},o.scale=function(e,t,n,r,i){for(var s=i?o.allBodies(e):e.bodies,c=0;c<s.length;c++){var l=s[c],u=l.position.x-r.x,f=l.position.y-r.y;a.setPosition(l,{x:r.x+u*t,y:r.y+f*n}),a.scale(l,t,n)}return o.setModified(e,!0,!0,!1),e},o.bounds=function(e){for(var t=o.allBodies(e),n=[],r=0;r<t.length;r+=1){var i=t[r];n.push(i.bounds.min,i.bounds.max)}return s.create(n)}},{"../core/Common":13,"../core/Events":15,"../geometry/Bounds":21,"./Body":2}],4:[function(e,t,n){var o={};t.exports=o;var r=e("./Composite"),i=(e("../constraint/Constraint"),e("../core/Common"));o.create=function(e){var t=r.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return i.extend(t,n,e)}},{"../constraint/Constraint":12,"../core/Common":13,"./Composite":3}],5:[function(e,t,n){var o={};t.exports=o,o.create=function(e){return{id:o.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},o.id=function(e){return e.body.id+"_"+e.index}},{}],6:[function(e,t,n){var o={};t.exports=o;var r=e("./SAT"),i=e("./Pair"),s=e("../geometry/Bounds");o.collisions=function(e,t){for(var n=[],a=t.pairs.table,c=t.metrics,l=0;l<e.length;l++){var u=e[l][0],f=e[l][1];if((!u.isStatic&&!u.isSleeping||!f.isStatic&&!f.isSleeping)&&o.canCollide(u.collisionFilter,f.collisionFilter)&&(c.midphaseTests+=1,s.overlaps(u.bounds,f.bounds)))for(var p=u.parts.length>1?1:0;p<u.parts.length;p++)for(var d=u.parts[p],h=f.parts.length>1?1:0;h<f.parts.length;h++){var g=f.parts[h];if(d===u&&g===f||s.overlaps(d.bounds,g.bounds)){var m,y=a[i.id(d,g)];m=y&&y.isActive?y.collision:null;var v=r.collides(d,g,m);c.narrowphaseTests+=1,v.reused&&(c.narrowReuseCount+=1),v.collided&&(n.push(v),c.narrowDetections+=1)}}}return n},o.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":21,"./Pair":8,"./SAT":11}],7:[function(e,t,n){var o={};t.exports=o;var r=e("./Pair"),i=e("./Detector"),s=e("../core/Common");o.create=function(e){var t={controller:o,detector:i.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(t,e)},o.update=function(e,t,n,r){var i,s,a,c,l,u=n.world,f=e.buckets,p=!1,d=n.metrics;for(d.broadphaseTests=0,i=0;i<t.length;i++){var h=t[i];if((!h.isSleeping||r)&&!(h.bounds.max.x<u.bounds.min.x||h.bounds.min.x>u.bounds.max.x||h.bounds.max.y<u.bounds.min.y||h.bounds.min.y>u.bounds.max.y)){var g=o._getRegion(e,h);if(!h.region||g.id!==h.region.id||r){d.broadphaseTests+=1,h.region&&!r||(h.region=g);var m=o._regionUnion(g,h.region);for(s=m.startCol;s<=m.endCol;s++)for(a=m.startRow;a<=m.endRow;a++){c=f[l=o._getBucketId(s,a)];var y=s>=g.startCol&&s<=g.endCol&&a>=g.startRow&&a<=g.endRow,v=s>=h.region.startCol&&s<=h.region.endCol&&a>=h.region.startRow&&a<=h.region.endRow;!y&&v&&v&&c&&o._bucketRemoveBody(e,c,h),(h.region===g||y&&!v||r)&&(c||(c=o._createBucket(f,l)),o._bucketAddBody(e,c,h))}h.region=g,p=!0}}}p&&(e.pairsList=o._createActivePairsList(e))},o.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},o._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),r=Math.max(e.endCol,t.endCol),i=Math.min(e.startRow,t.startRow),s=Math.max(e.endRow,t.endRow);return o._createRegion(n,r,i,s)},o._getRegion=function(e,t){var n=t.bounds,r=Math.floor(n.min.x/e.bucketWidth),i=Math.floor(n.max.x/e.bucketWidth),s=Math.floor(n.min.y/e.bucketHeight),a=Math.floor(n.max.y/e.bucketHeight);return o._createRegion(r,i,s,a)},o._createRegion=function(e,t,n,o){return{id:e+","+t+","+n+","+o,startCol:e,endCol:t,startRow:n,endRow:o}},o._getBucketId=function(e,t){return"C"+e+"R"+t},o._createBucket=function(e,t){return e[t]=[]},o._bucketAddBody=function(e,t,n){for(var o=0;o<t.length;o++){var i=t[o];if(!(n.id===i.id||n.isStatic&&i.isStatic)){var s=r.id(n,i),a=e.pairs[s];a?a[2]+=1:e.pairs[s]=[n,i,1]}}t.push(n)},o._bucketRemoveBody=function(e,t,n){t.splice(s.indexOf(t,n),1);for(var o=0;o<t.length;o++){var i=t[o],a=r.id(n,i),c=e.pairs[a];c&&(c[2]-=1)}},o._createActivePairsList=function(e){var t,n,o=[];t=s.keys(e.pairs);for(var r=0;r<t.length;r++)(n=e.pairs[t[r]])[2]>0?o.push(n):delete e.pairs[t[r]];return o}},{"../core/Common":13,"./Detector":6,"./Pair":8}],8:[function(e,t,n){var o={};t.exports=o;var r=e("./Contact");o.create=function(e,t){var n=e.bodyA,r=e.bodyB,i=e.parentA,s=e.parentB,a={id:o.id(n,r),bodyA:n,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:i.inverseMass+s.inverseMass,friction:Math.min(i.friction,s.friction),frictionStatic:Math.max(i.frictionStatic,s.frictionStatic),restitution:Math.max(i.restitution,s.restitution),slop:Math.max(i.slop,s.slop)};return o.update(a,e,t),a},o.update=function(e,t,n){var i=e.contacts,s=t.supports,a=e.activeContacts,c=t.parentA,l=t.parentB;if(e.collision=t,e.inverseMass=c.inverseMass+l.inverseMass,e.friction=Math.min(c.friction,l.friction),e.frictionStatic=Math.max(c.frictionStatic,l.frictionStatic),e.restitution=Math.max(c.restitution,l.restitution),e.slop=Math.max(c.slop,l.slop),a.length=0,t.collided){for(var u=0;u<s.length;u++){var f=s[u],p=r.id(f),d=i[p];d?a.push(d):a.push(i[p]=r.create(f))}e.separation=t.depth,o.setActive(e,!0,n)}else!0===e.isActive&&o.setActive(e,!1,n)},o.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},o.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":5}],9:[function(e,t,n){var o={};t.exports=o;var r=e("./Pair"),i=e("../core/Common");o._pairMaxIdleLife=1e3,o.create=function(e){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},o.update=function(e,t,n){var o,s,a,c,l=e.list,u=e.table,f=e.collisionStart,p=e.collisionEnd,d=e.collisionActive,h=[];for(f.length=0,p.length=0,d.length=0,c=0;c<t.length;c++)(o=t[c]).collided&&(s=r.id(o.bodyA,o.bodyB),h.push(s),(a=u[s])?(a.isActive?d.push(a):f.push(a),r.update(a,o,n)):(a=r.create(o,n),u[s]=a,f.push(a),l.push(a)));for(c=0;c<l.length;c++)(a=l[c]).isActive&&-1===i.indexOf(h,a.id)&&(r.setActive(a,!1,n),p.push(a))},o.removeOld=function(e,t){var n,r,i,s,a=e.list,c=e.table,l=[];for(s=0;s<a.length;s++)(r=(n=a[s]).collision).bodyA.isSleeping||r.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>o._pairMaxIdleLife&&l.push(s);for(s=0;s<l.length;s++)delete c[(n=a[i=l[s]-s]).id],a.splice(i,1)},o.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":13,"./Pair":8}],10:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vertices"),i=e("../geometry/Vector"),s=e("../core/Common"),a=e("../geometry/Bounds");o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(e){var t,n,o;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(o=n.activeContacts.length,n.collision.parentA.totalContacts+=o,n.collision.parentB.totalContacts+=o)},o.solvePosition=function(e,t){var n,r,s,a,c,l,u,f,p,d=i._temp[0],h=i._temp[1],g=i._temp[2],m=i._temp[3];for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(a=(s=r.collision).parentA,c=s.parentB,l=s.normal,u=i.sub(i.add(c.positionImpulse,c.position,d),i.add(a.positionImpulse,i.sub(c.position,s.penetration,h),g),m),r.separation=i.dot(l,u));for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(a=(s=r.collision).parentA,c=s.parentB,l=s.normal,p=(r.separation-r.slop)*t,(a.isStatic||c.isStatic)&&(p*=2),a.isStatic||a.isSleeping||(f=o._positionDampen/a.totalContacts,a.positionImpulse.x+=l.x*p*f,a.positionImpulse.y+=l.y*p*f),c.isStatic||c.isSleeping||(f=o._positionDampen/c.totalContacts,c.positionImpulse.x-=l.x*p*f,c.positionImpulse.y-=l.y*p*f))},o.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var s=0;s<n.parts.length;s++){var c=n.parts[s];r.translate(c.vertices,n.positionImpulse),a.update(c.bounds,c.vertices,n.velocity),c.position.x+=n.positionImpulse.x,c.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,i.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=o._positionWarming,n.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(e){var t,n,o,r,s,a,c,l,u,f,p,d,h,g,m=i._temp[0],y=i._temp[1];for(t=0;t<e.length;t++)if((o=e[t]).isActive&&!o.isSensor)for(r=o.activeContacts,a=(s=o.collision).parentA,c=s.parentB,l=s.normal,u=s.tangent,n=0;n<r.length;n++)p=(f=r[n]).vertex,d=f.normalImpulse,h=f.tangentImpulse,0===d&&0===h||(m.x=l.x*d+u.x*h,m.y=l.y*d+u.y*h,a.isStatic||a.isSleeping||(g=i.sub(p,a.position,y),a.positionPrev.x+=m.x*a.inverseMass,a.positionPrev.y+=m.y*a.inverseMass,a.anglePrev+=i.cross(g,m)*a.inverseInertia),c.isStatic||c.isSleeping||(g=i.sub(p,c.position,y),c.positionPrev.x-=m.x*c.inverseMass,c.positionPrev.y-=m.y*c.inverseMass,c.anglePrev-=i.cross(g,m)*c.inverseInertia))},o.solveVelocity=function(e,t){for(var n=t*t,r=i._temp[0],a=i._temp[1],c=i._temp[2],l=i._temp[3],u=i._temp[4],f=i._temp[5],p=0;p<e.length;p++){var d=e[p];if(d.isActive&&!d.isSensor){var h=d.collision,g=h.parentA,m=h.parentB,y=h.normal,v=h.tangent,x=d.activeContacts,b=1/x.length;g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,m.angularVelocity=m.angle-m.anglePrev;for(var w=0;w<x.length;w++){var _=x[w],k=_.vertex,A=i.sub(k,g.position,a),S=i.sub(k,m.position,c),C=i.add(g.velocity,i.mult(i.perp(A),g.angularVelocity),l),T=i.add(m.velocity,i.mult(i.perp(S),m.angularVelocity),u),P=i.sub(C,T,f),E=i.dot(y,P),M=i.dot(v,P),I=Math.abs(M),R=s.sign(M),B=(1+d.restitution)*E,O=s.clamp(d.separation+E,0,1)*o._frictionNormalMultiplier,L=M,F=1/0;I>d.friction*d.frictionStatic*O*n&&(F=I,L=s.clamp(d.friction*R*n,-F,F));var j=i.cross(A,y),D=i.cross(S,y),N=b/(g.inverseMass+m.inverseMass+g.inverseInertia*j*j+m.inverseInertia*D*D);if(B*=N,L*=N,E<0&&E*E>o._restingThresh*n)_.normalImpulse=0;else{var V=_.normalImpulse;_.normalImpulse=Math.min(_.normalImpulse+B,0),B=_.normalImpulse-V}if(M*M>o._restingThreshTangent*n)_.tangentImpulse=0;else{var q=_.tangentImpulse;_.tangentImpulse=s.clamp(_.tangentImpulse+L,-F,F),L=_.tangentImpulse-q}r.x=y.x*B+v.x*L,r.y=y.y*B+v.y*L,g.isStatic||g.isSleeping||(g.positionPrev.x+=r.x*g.inverseMass,g.positionPrev.y+=r.y*g.inverseMass,g.anglePrev+=i.cross(A,r)*g.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=r.x*m.inverseMass,m.positionPrev.y-=r.y*m.inverseMass,m.anglePrev-=i.cross(S,r)*m.inverseInertia)}}}}},{"../core/Common":13,"../geometry/Bounds":21,"../geometry/Vector":22,"../geometry/Vertices":23}],11:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vertices"),i=e("../geometry/Vector");o.collides=function(e,t,n){var s,a,c,l,u=!1;if(n){var f=e.parent,p=t.parent,d=f.speed*f.speed+f.angularSpeed*f.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;u=n&&n.collided&&d<.2,l=n}else l={collided:!1,bodyA:e,bodyB:t};if(n&&u){var h=l.axisBody,g=h===e?t:e,m=[h.axes[n.axisNumber]];if(c=o._overlapAxes(h.vertices,g.vertices,m),l.reused=!0,c.overlap<=0)return l.collided=!1,l}else{if((s=o._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return l.collided=!1,l;if((a=o._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return l.collided=!1,l;s.overlap<a.overlap?(c=s,l.axisBody=e):(c=a,l.axisBody=t),l.axisNumber=c.axisNumber}l.bodyA=e.id<t.id?e:t,l.bodyB=e.id<t.id?t:e,l.collided=!0,l.depth=c.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,e=l.bodyA,t=l.bodyB,i.dot(c.axis,i.sub(t.position,e.position))<0?l.normal={x:c.axis.x,y:c.axis.y}:l.normal={x:-c.axis.x,y:-c.axis.y},l.tangent=i.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var y=o._findSupports(e,t,l.normal),v=[];if(r.contains(e.vertices,y[0])&&v.push(y[0]),r.contains(e.vertices,y[1])&&v.push(y[1]),v.length<2){var x=o._findSupports(t,e,i.neg(l.normal));r.contains(t.vertices,x[0])&&v.push(x[0]),v.length<2&&r.contains(t.vertices,x[1])&&v.push(x[1])}return v.length<1&&(v=[y[0]]),l.supports=v,l},o._overlapAxes=function(e,t,n){for(var r,s,a=i._temp[0],c=i._temp[1],l={overlap:Number.MAX_VALUE},u=0;u<n.length;u++){if(s=n[u],o._projectToAxis(a,e,s),o._projectToAxis(c,t,s),(r=Math.min(a.max-c.min,c.max-a.min))<=0)return l.overlap=r,l;r<l.overlap&&(l.overlap=r,l.axis=s,l.axisNumber=u)}return l},o._projectToAxis=function(e,t,n){for(var o=i.dot(t[0],n),r=o,s=1;s<t.length;s+=1){var a=i.dot(t[s],n);a>r?r=a:a<o&&(o=a)}e.min=o,e.max=r},o._findSupports=function(e,t,n){for(var o,r,s,a,c=Number.MAX_VALUE,l=i._temp[0],u=t.vertices,f=e.position,p=0;p<u.length;p++)r=u[p],l.x=r.x-f.x,l.y=r.y-f.y,(o=-i.dot(n,l))<c&&(c=o,s=r);return r=u[s.index-1>=0?s.index-1:u.length-1],l.x=r.x-f.x,l.y=r.y-f.y,c=-i.dot(n,l),a=r,r=u[(s.index+1)%u.length],l.x=r.x-f.x,l.y=r.y-f.y,(o=-i.dot(n,l))<c&&(a=r),[s,a]}},{"../geometry/Vector":22,"../geometry/Vertices":23}],12:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vertices"),i=e("../geometry/Vector"),s=e("../core/Sleeping"),a=e("../geometry/Bounds"),c=e("../geometry/Axes"),l=e("../core/Common");o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,o=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,r=i.magnitude(i.sub(n,o));t.length=void 0!==t.length?t.length:r,t.id=t.id||l.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var s={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(s.type="pin",s.anchors=!1):t.stiffness<.9&&(s.type="spring"),t.render=l.extend(s,t.render),t},o.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],o=n.constraintImpulse;n.isStatic||0===o.x&&0===o.y&&0===o.angle||(n.position.x+=o.x,n.position.y+=o.y,n.angle+=o.angle)}},o.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n],i=!r.bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(i||s)&&o.solve(e[n],t)}for(n=0;n<e.length;n+=1)i=!(r=e[n]).bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic,i||s||o.solve(e[n],t)},o.solve=function(e,t){var n=e.bodyA,r=e.bodyB,s=e.pointA,a=e.pointB;if(n||r){n&&!n.isStatic&&(i.rotate(s,n.angle-e.angleA,s),e.angleA=n.angle),r&&!r.isStatic&&(i.rotate(a,r.angle-e.angleB,a),e.angleB=r.angle);var c=s,l=a;if(n&&(c=i.add(n.position,s)),r&&(l=i.add(r.position,a)),c&&l){var u=i.sub(c,l),f=i.magnitude(u);f<o._minLength&&(f=o._minLength);var p,d,h,g,m,y=(f-e.length)/f,v=e.stiffness<1?e.stiffness*t:e.stiffness,x=i.mult(u,y*v),b=(n?n.inverseMass:0)+(r?r.inverseMass:0),w=b+((n?n.inverseInertia:0)+(r?r.inverseInertia:0));if(e.damping){var _=i.create();h=i.div(u,f),m=i.sub(r&&i.sub(r.position,r.positionPrev)||_,n&&i.sub(n.position,n.positionPrev)||_),g=i.dot(h,m)}n&&!n.isStatic&&(d=n.inverseMass/b,n.constraintImpulse.x-=x.x*d,n.constraintImpulse.y-=x.y*d,n.position.x-=x.x*d,n.position.y-=x.y*d,e.damping&&(n.positionPrev.x-=e.damping*h.x*g*d,n.positionPrev.y-=e.damping*h.y*g*d),p=i.cross(s,x)/w*o._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=p,n.angle-=p),r&&!r.isStatic&&(d=r.inverseMass/b,r.constraintImpulse.x+=x.x*d,r.constraintImpulse.y+=x.y*d,r.position.x+=x.x*d,r.position.y+=x.y*d,e.damping&&(r.positionPrev.x+=e.damping*h.x*g*d,r.positionPrev.y+=e.damping*h.y*g*d),p=i.cross(a,x)/w*o._torqueDampen*r.inverseInertia*(1-e.angularStiffness),r.constraintImpulse.angle+=p,r.angle+=p)}}},o.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],l=n.constraintImpulse;if(!(n.isStatic||0===l.x&&0===l.y&&0===l.angle)){s.set(n,!1);for(var u=0;u<n.parts.length;u++){var f=n.parts[u];r.translate(f.vertices,l),u>0&&(f.position.x+=l.x,f.position.y+=l.y),0!==l.angle&&(r.rotate(f.vertices,l.angle,n.position),c.rotate(f.axes,l.angle),u>0&&i.rotateAbout(f.position,l.angle,n.position,f.position)),a.update(f.bounds,f.vertices,n.velocity)}l.angle*=o._warming,l.x*=o._warming,l.y*=o._warming}}}},{"../core/Common":13,"../core/Sleeping":18,"../geometry/Axes":20,"../geometry/Bounds":21,"../geometry/Vector":22,"../geometry/Vertices":23}],13:[function(e,t,n){(function(n){var o={};t.exports=o,function(){o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o.extend=function(e,t){var n,r;"boolean"==typeof t?(n=2,r=t):(n=1,r=!0);for(var i=n;i<arguments.length;i++){var s=arguments[i];if(s)for(var a in s)r&&s[a]&&s[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=s[a]:(e[a]=e[a]||{},o.extend(e[a],r,s[a])):e[a]=s[a]}return e},o.clone=function(e,t){return o.extend({},t,e)},o.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},o.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),o=0;o<n.length;o++)t.push(e[n[o]]);return t}for(var r in e)t.push(e[r]);return t},o.get=function(e,t,n,o){t=t.split(".").slice(n,o);for(var r=0;r<t.length;r+=1)e=e[t[r]];return e},o.set=function(e,t,n,r,i){var s=t.split(".").slice(r,i);return o.get(e,t,0,-1)[s[s.length-1]]=n,n},o.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(o.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},o.choose=function(e){return e[Math.floor(o.random()*e.length)]},o.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},o.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.isFunction=function(e){return"function"==typeof e},o.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},o.isString=function(e){return"[object String]"===toString.call(e)},o.clamp=function(e,t,n){return e<t?t:e>n?n:e},o.sign=function(e){return e<0?-1:1},o.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-o._nowStartTime},o.random=function(e,n){return e=void 0!==e?e:0,n=void 0!==n?n:1,e+t()*(n-e)};var t=function(){return o._seed=(9301*o._seed+49297)%233280,o._seed/233280};o.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.nextId=function(){return o._nextId++},o.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},o.map=function(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n},o.topologicalSort=function(e){var t=[],n=[],r=[];for(var i in e)n[i]||r[i]||o._topologicalSort(i,n,r,e,t);return t},o._topologicalSort=function(e,t,n,r,i){var s=r[e]||[];n[e]=!0;for(var a=0;a<s.length;a+=1){var c=s[a];n[c]||(t[c]||o._topologicalSort(c,t,n,r,i))}n[e]=!1,t[e]=!0,i.push(e)},o.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var o=function(){for(var t,n=new Array(arguments.length),o=0,r=arguments.length;o<r;o++)n[o]=arguments[o];for(o=0;o<e.length;o+=1){var i=e[o].apply(t,n);void 0!==i&&(t=i)}return t};return o._chained=e,o},o.chainPathBefore=function(e,t,n){return o.set(e,t,o.chain(n,o.get(e,t)))},o.chainPathAfter=function(e,t,n){return o.set(e,t,o.chain(o.get(e,t),n))},o._requireGlobal=function(t,o){return("undefined"!=typeof window?window[t]:void 0!==n?n[t]:null)||e(o)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){var o={};t.exports=o;var r=e("../body/World"),i=e("./Sleeping"),s=e("../collision/Resolver"),a=e("../render/Render"),c=e("../collision/Pairs"),l=e("./Metrics"),u=e("../collision/Grid"),f=e("./Events"),p=e("../body/Composite"),d=e("../constraint/Constraint"),h=e("./Common"),g=e("../body/Body");o.create=function(e,t){t=h.isElement(e)?t:e,e=h.isElement(e)?e:null,t=t||{},(e||t.render)&&h.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:u}},o=h.extend(n,t);if(e||o.render){var i={element:e,controller:a};o.render=h.extend(i,o.render)}return o.render&&o.render.controller&&(o.render=o.render.controller.create(o.render)),o.render&&(o.render.engine=o),o.world=t.world||r.create(o.world),o.pairs=c.create(),o.broadphase=o.broadphase.controller.create(o.broadphase),o.metrics=o.metrics||{extended:!1},o.metrics=l.create(o.metrics),o},o.update=function(e,t,n){t=t||1e3/60,n=n||1;var r,a=e.world,u=e.timing,h=e.broadphase,g=[];u.timestamp+=t*u.timeScale;var m={timestamp:u.timestamp};f.trigger(e,"beforeUpdate",m);var y=p.allBodies(a),v=p.allConstraints(a);for(l.reset(e.metrics),e.enableSleeping&&i.update(y,u.timeScale),o._bodiesApplyGravity(y,a.gravity),o._bodiesUpdate(y,t,u.timeScale,n,a.bounds),d.preSolveAll(y),r=0;r<e.constraintIterations;r++)d.solveAll(v,u.timeScale);d.postSolveAll(y),h.controller?(a.isModified&&h.controller.clear(h),h.controller.update(h,y,e,a.isModified),g=h.pairsList):g=y,a.isModified&&p.setModified(a,!1,!1,!0);var x=h.detector(g,e),b=e.pairs,w=u.timestamp;for(c.update(b,x,w),c.removeOld(b,w),e.enableSleeping&&i.afterCollisions(b.list,u.timeScale),b.collisionStart.length>0&&f.trigger(e,"collisionStart",{pairs:b.collisionStart}),s.preSolvePosition(b.list),r=0;r<e.positionIterations;r++)s.solvePosition(b.list,u.timeScale);for(s.postSolvePosition(y),d.preSolveAll(y),r=0;r<e.constraintIterations;r++)d.solveAll(v,u.timeScale);for(d.postSolveAll(y),s.preSolveVelocity(b.list),r=0;r<e.velocityIterations;r++)s.solveVelocity(b.list,u.timeScale);return b.collisionActive.length>0&&f.trigger(e,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&f.trigger(e,"collisionEnd",{pairs:b.collisionEnd}),l.update(e.metrics,e),o._bodiesClearForces(y),f.trigger(e,"afterUpdate",m),e},o.merge=function(e,t){if(h.extend(e,t),t.world){e.world=t.world,o.clear(e);for(var n=p.allBodies(e.world),r=0;r<n.length;r++){var s=n[r];i.set(s,!1),s.id=h.nextId()}}},o.clear=function(e){var t=e.world;c.clear(e.pairs);var n=e.broadphase;if(n.controller){var o=p.allBodies(t);n.controller.clear(n),n.controller.update(n,o,e,!0)}},o._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},o._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var o=0;o<e.length;o++){var r=e[o];r.isStatic||r.isSleeping||(r.force.y+=r.mass*t.y*n,r.force.x+=r.mass*t.x*n)}},o._bodiesUpdate=function(e,t,n,o,r){for(var i=0;i<e.length;i++){var s=e[i];s.isStatic||s.isSleeping||g.update(s,t,n,o)}}},{"../body/Body":2,"../body/Composite":3,"../body/World":4,"../collision/Grid":7,"../collision/Pairs":9,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":24,"./Common":13,"./Events":15,"./Metrics":16,"./Sleeping":18}],15:[function(e,t,n){var o={};t.exports=o;var r=e("./Common");o.on=function(e,t,n){for(var o,r=t.split(" "),i=0;i<r.length;i++)o=r[i],e.events=e.events||{},e.events[o]=e.events[o]||[],e.events[o].push(n);return n},o.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=r.keys(e.events).join(" "));for(var o=t.split(" "),i=0;i<o.length;i++){var s=e.events[o[i]],a=[];if(n&&s)for(var c=0;c<s.length;c++)s[c]!==n&&a.push(s[c]);e.events[o[i]]=a}}else e.events={}},o.trigger=function(e,t,n){var o,i,s,a;if(e.events){n||(n={}),o=t.split(" ");for(var c=0;c<o.length;c++)if(i=o[c],s=e.events[i]){(a=r.clone(n,!1)).name=i,a.source=e;for(var l=0;l<s.length;l++)s[l].apply(e,[a])}}}},{"./Common":13}],16:[function(e,t,n){var o={};t.exports=o;var r=e("../body/Composite"),i=e("./Common");o.create=function(e){return i.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)},o.reset=function(e){e.extended&&(e.narrowDetections=0,e.narrowphaseTests=0,e.narrowReuse=0,e.narrowReuseCount=0,e.midphaseTests=0,e.broadphaseTests=0,e.narrowEff=0,e.midEff=0,e.broadEff=0,e.collisions=0,e.buckets=0,e.pairs=0,e.bodies=0)},o.update=function(e,t){if(e.extended){var n=t.world,o=r.allBodies(n);e.collisions=e.narrowDetections,e.pairs=t.pairs.list.length,e.bodies=o.length,e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2),e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2),e.broadEff=(1-e.broadphaseTests/(o.length||1)).toFixed(2),e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}}},{"../body/Composite":3,"./Common":13}],17:[function(e,t,n){var o={};t.exports=o;var r=e("../core/Common");o.create=function(e){var t={};return e||r.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=t.element.getAttribute("data-pixel-ratio")||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},o.setElement(t,t.element),t},o.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},o.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},o.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o._getRelativeMousePosition=function(e,t,n){var o,r,i=t.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,c=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,l=e.changedTouches;return l?(o=l[0].pageX-i.left-a,r=l[0].pageY-i.top-c):(o=e.pageX-i.left-a,r=e.pageY-i.top-c),{x:o/(t.clientWidth/(t.width||t.clientWidth)*n),y:r/(t.clientHeight/(t.height||t.clientHeight)*n)}}},{"../core/Common":13}],18:[function(e,t,n){var o={};t.exports=o;var r=e("./Events");o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var i=e[r],s=i.speed*i.speed+i.angularSpeed*i.angularSpeed;if(0===i.force.x&&0===i.force.y){var a=Math.min(i.motion,s),c=Math.max(i.motion,s);i.motion=o._minBias*a+(1-o._minBias)*c,i.sleepThreshold>0&&i.motion<o._motionSleepThreshold*n?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold&&o.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}else o.set(i,!1)}},o.afterCollisions=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var i=e[r];if(i.isActive){var s=i.collision,a=s.bodyA.parent,c=s.bodyB.parent;if(!(a.isSleeping&&c.isSleeping||a.isStatic||c.isStatic)&&(a.isSleeping||c.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:c,u=l===a?c:a;!l.isStatic&&u.motion>o._motionWakeThreshold*n&&o.set(l,!1)}}}},o.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&r.trigger(e,"sleepEnd"))}},{"./Events":15}],19:[function(e,t,n){var o={};t.exports=o;var r,i=e("../geometry/Vertices"),s=e("../core/Common"),a=e("../body/Body"),c=e("../geometry/Bounds"),l=e("../geometry/Vector");o.rectangle=function(e,t,n,o,r){r=r||{};var c={label:"Rectangle Body",position:{x:e,y:t},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+o+" L 0 "+o)};if(r.chamfer){var l=r.chamfer;c.vertices=i.chamfer(c.vertices,l.radius,l.quality,l.qualityMin,l.qualityMax),delete r.chamfer}return a.create(s.extend({},c,r))},o.trapezoid=function(e,t,n,o,r,c){c=c||{};var l,u=n*(r*=.5),f=u+(1-2*r)*n,p=f+u;l=r<.5?"L 0 0 L "+u+" "+-o+" L "+f+" "+-o+" L "+p+" 0":"L 0 0 L "+f+" "+-o+" L "+p+" 0";var d={label:"Trapezoid Body",position:{x:e,y:t},vertices:i.fromPath(l)};if(c.chamfer){var h=c.chamfer;d.vertices=i.chamfer(d.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete c.chamfer}return a.create(s.extend({},d,c))},o.circle=function(e,t,n,r,i){r=r||{};var a={label:"Circle Body",circleRadius:n};i=i||25;var c=Math.ceil(Math.max(10,Math.min(i,n)));return c%2==1&&(c+=1),o.polygon(e,t,c,n,s.extend({},a,r))},o.polygon=function(e,t,n,r,c){if(c=c||{},n<3)return o.circle(e,t,r,c);for(var l=2*Math.PI/n,u="",f=.5*l,p=0;p<n;p+=1){var d=f+p*l,h=Math.cos(d)*r,g=Math.sin(d)*r;u+="L "+h.toFixed(3)+" "+g.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:e,y:t},vertices:i.fromPath(u)};if(c.chamfer){var y=c.chamfer;m.vertices=i.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete c.chamfer}return a.create(s.extend({},m,c))},o.fromVertices=function(e,t,n,o,u,f,p){var d,h,g,m,y,v,x,b,w;for(r||(r=s._requireGlobal("decomp","poly-decomp")),o=o||{},h=[],u=void 0!==u&&u,f=void 0!==f?f:.01,p=void 0!==p?p:10,r||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(n[0])||(n=[n]),b=0;b<n.length;b+=1)if(m=n[b],(g=i.isConvex(m))||!r)m=g?i.clockwiseSort(m):i.hull(m),h.push({position:{x:e,y:t},vertices:m});else{var _=m.map(function(e){return[e.x,e.y]});r.makeCCW(_),!1!==f&&r.removeCollinearPoints(_,f);var k=r.quickDecomp(_);for(y=0;y<k.length;y++){var A=k[y].map(function(e){return{x:e[0],y:e[1]}});p>0&&i.area(A)<p||h.push({position:i.centre(A),vertices:A})}}for(y=0;y<h.length;y++)h[y]=a.create(s.extend(h[y],o));if(u)for(y=0;y<h.length;y++){var S=h[y];for(v=y+1;v<h.length;v++){var C=h[v];if(c.overlaps(S.bounds,C.bounds)){var T=S.vertices,P=C.vertices;for(x=0;x<S.vertices.length;x++)for(w=0;w<C.vertices.length;w++){var E=l.magnitudeSquared(l.sub(T[(x+1)%T.length],P[w])),M=l.magnitudeSquared(l.sub(T[x],P[(w+1)%P.length]));E<5&&M<5&&(T[x].isInternal=!0,P[w].isInternal=!0)}}}}return h.length>1?(d=a.create(s.extend({parts:h.slice(0)},o)),a.setPosition(d,{x:e,y:t}),d):h[0]}},{"../body/Body":2,"../core/Common":13,"../geometry/Bounds":21,"../geometry/Vector":22,"../geometry/Vertices":23}],20:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vector"),i=e("../core/Common");o.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var o=(n+1)%e.length,s=r.normalise({x:e[o].y-e[n].y,y:e[n].x-e[o].x}),a=0===s.y?1/0:s.x/s.y;t[a=a.toFixed(3).toString()]=s}return i.values(t)},o.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),o=Math.sin(t),r=0;r<e.length;r++){var i,s=e[r];i=s.x*n-s.y*o,s.y=s.x*o+s.y*n,s.x=i}}},{"../core/Common":13,"../geometry/Vector":22}],21:[function(e,t,n){var o={};t.exports=o,o.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&o.update(t,e),t},o.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<t.length;o++){var r=t[o];r.x>e.max.x&&(e.max.x=r.x),r.x<e.min.x&&(e.min.x=r.x),r.y>e.max.y&&(e.max.y=r.y),r.y<e.min.y&&(e.min.y=r.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},o.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},o.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},o.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},o.shift=function(e,t){var n=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+o}},{}],22:[function(e,t,n){var o={};t.exports=o,o.create=function(e,t){return{x:e||0,y:t||0}},o.clone=function(e){return{x:e.x,y:e.y}},o.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},o.rotate=function(e,t,n){var o=Math.cos(t),r=Math.sin(t);n||(n={});var i=e.x*o-e.y*r;return n.y=e.x*r+e.y*o,n.x=i,n},o.rotateAbout=function(e,t,n,o){var r=Math.cos(t),i=Math.sin(t);o||(o={});var s=n.x+((e.x-n.x)*r-(e.y-n.y)*i);return o.y=n.y+((e.x-n.x)*i+(e.y-n.y)*r),o.x=s,o},o.normalise=function(e){var t=o.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},o.dot=function(e,t){return e.x*t.x+e.y*t.y},o.cross=function(e,t){return e.x*t.y-e.y*t.x},o.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},o.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},o.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},o.mult=function(e,t){return{x:e.x*t,y:e.y*t}},o.div=function(e,t){return{x:e.x/t,y:e.y/t}},o.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},o.neg=function(e){return{x:-e.x,y:-e.y}},o.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]},{}],23:[function(e,t,n){var o={};t.exports=o;var r=e("../geometry/Vector"),i=e("../core/Common");o.create=function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o],i={x:r.x,y:r.y,index:o,body:t,isInternal:!1};n.push(i)}return n},o.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(e,t,o){n.push({x:parseFloat(t),y:parseFloat(o)})}),o.create(n,t)},o.centre=function(e){for(var t,n,i,s=o.area(e,!0),a={x:0,y:0},c=0;c<e.length;c++)i=(c+1)%e.length,t=r.cross(e[c],e[i]),n=r.mult(r.add(e[c],e[i]),t),a=r.add(a,n);return r.div(a,6*s)},o.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return r.div(t,e.length)},o.area=function(e,t){for(var n=0,o=e.length-1,r=0;r<e.length;r++)n+=(e[o].x-e[r].x)*(e[o].y+e[r].y),o=r;return t?n/2:Math.abs(n)/2},o.inertia=function(e,t){for(var n,o,i=0,s=0,a=e,c=0;c<a.length;c++)o=(c+1)%a.length,i+=(n=Math.abs(r.cross(a[o],a[c])))*(r.dot(a[o],a[o])+r.dot(a[o],a[c])+r.dot(a[c],a[c])),s+=n;return t/6*(i/s)},o.translate=function(e,t,n){var o;if(n)for(o=0;o<e.length;o++)e[o].x+=t.x*n,e[o].y+=t.y*n;else for(o=0;o<e.length;o++)e[o].x+=t.x,e[o].y+=t.y;return e},o.rotate=function(e,t,n){if(0!==t){for(var o=Math.cos(t),r=Math.sin(t),i=0;i<e.length;i++){var s=e[i],a=s.x-n.x,c=s.y-n.y;s.x=n.x+(a*o-c*r),s.y=n.y+(a*r+c*o)}return e}},o.contains=function(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=e[(n+1)%e.length];if((t.x-o.x)*(r.y-o.y)+(t.y-o.y)*(o.x-r.x)>0)return!1}return!0},o.scale=function(e,t,n,i){if(1===t&&1===n)return e;var s,a;i=i||o.centre(e);for(var c=0;c<e.length;c++)s=e[c],a=r.sub(s,i),e[c].x=i.x+a.x*t,e[c].y=i.y+a.y*n;return e},o.chamfer=function(e,t,n,o,s){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,o=o||2,s=s||14;for(var a=[],c=0;c<e.length;c++){var l=e[c-1>=0?c-1:e.length-1],u=e[c],f=e[(c+1)%e.length],p=t[c<t.length?c:t.length-1];if(0!==p){var d=r.normalise({x:u.y-l.y,y:l.x-u.x}),h=r.normalise({x:f.y-u.y,y:u.x-f.x}),g=Math.sqrt(2*Math.pow(p,2)),m=r.mult(i.clone(d),p),y=r.normalise(r.mult(r.add(d,h),.5)),v=r.sub(u,r.mult(y,g)),x=n;-1===n&&(x=1.75*Math.pow(p,.32)),(x=i.clamp(x,o,s))%2==1&&(x+=1);for(var b=Math.acos(r.dot(d,h))/x,w=0;w<x;w++)a.push(r.add(r.rotate(m,b*w),v))}else a.push(u)}return a},o.clockwiseSort=function(e){var t=o.mean(e);return e.sort(function(e,n){return r.angle(t,e)-r.angle(t,n)}),e},o.isConvex=function(e){var t,n,o,r,i=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(o=(t+2)%s,r=(e[n=(t+1)%s].x-e[t].x)*(e[o].y-e[n].y),(r-=(e[n].y-e[t].y)*(e[o].x-e[n].x))<0?i|=1:r>0&&(i|=2),3===i)return!1;return 0!==i||null},o.hull=function(e){var t,n,o=[],i=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];i.length>=2&&r.cross3(i[i.length-2],i[i.length-1],t)<=0;)i.pop();i.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];o.length>=2&&r.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}return o.pop(),i.pop(),o.concat(i)}},{"../core/Common":13,"../geometry/Vector":22}],24:[function(e,t,n){var o={};t.exports=o;var r=e("../core/Common"),i=e("../body/Composite"),s=e("../geometry/Bounds"),a=e("../core/Events"),c=e("../collision/Grid"),l=e("../geometry/Vector"),u=e("../core/Mouse");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(r.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o.create=function(e){var t={controller:o,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},i=r.extend(t,e);return i.canvas&&(i.canvas.width=i.options.width||i.canvas.width,i.canvas.height=i.options.height||i.canvas.height),i.mouse=e.mouse,i.engine=e.engine,i.canvas=i.canvas||n(i.options.width,i.options.height),i.context=i.canvas.getContext("2d"),i.textures={},i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.canvas.width,y:i.canvas.height}},1!==i.options.pixelRatio&&o.setPixelRatio(i,i.options.pixelRatio),r.isElement(i.element)?i.element.appendChild(i.canvas):i.canvas.parentNode||r.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),i},o.run=function(t){!function n(r){t.frameRequestId=e(n),o.world(t)}()},o.stop=function(e){t(e.frameRequestId)},o.setPixelRatio=function(e,t){var n=e.options,o=e.canvas;"auto"===t&&(t=f(o)),n.pixelRatio=t,o.setAttribute("data-pixel-ratio",t),o.width=n.width*t,o.height=n.height*t,o.style.width=n.width+"px",o.style.height=n.height+"px",e.context.scale(t,t)},o.lookAt=function(e,t,n,o){o=void 0===o||o,t=r.isArray(t)?t:[t],n=n||{x:0,y:0};for(var i={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},s=0;s<t.length;s+=1){var a=t[s],c=a.bounds?a.bounds.min:a.min||a.position||a,l=a.bounds?a.bounds.max:a.max||a.position||a;c&&l&&(c.x<i.min.x&&(i.min.x=c.x),l.x>i.max.x&&(i.max.x=l.x),c.y<i.min.y&&(i.min.y=c.y),l.y>i.max.y&&(i.max.y=l.y))}var f=i.max.x-i.min.x+2*n.x,p=i.max.y-i.min.y+2*n.y,d=e.canvas.height,h=e.canvas.width/d,g=f/p,m=1,y=1;g>h?y=g/h:m=h/g,e.options.hasBounds=!0,e.bounds.min.x=i.min.x,e.bounds.max.x=i.min.x+f*m,e.bounds.min.y=i.min.y,e.bounds.max.y=i.min.y+p*y,o&&(e.bounds.min.x+=.5*f-f*m*.5,e.bounds.max.x+=.5*f-f*m*.5,e.bounds.min.y+=.5*p-p*y*.5,e.bounds.max.y+=.5*p-p*y*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),u.setOffset(e.mouse,e.bounds.min))},o.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,r=n/e.options.height;e.context.scale(1/o,1/r),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},o.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},o.world=function(e){var t,n=e.engine,r=n.world,f=e.canvas,p=e.context,h=e.options,g=i.allBodies(r),m=i.allConstraints(r),y=h.wireframes?h.wireframeBackground:h.background,v=[],x=[],b={timestamp:n.timing.timestamp};if(a.trigger(e,"beforeRender",b),e.currentBackground!==y&&d(e,y),p.globalCompositeOperation="source-in",p.fillStyle="transparent",p.fillRect(0,0,f.width,f.height),p.globalCompositeOperation="source-over",h.hasBounds){for(t=0;t<g.length;t++){var w=g[t];s.overlaps(w.bounds,e.bounds)&&v.push(w)}for(t=0;t<m.length;t++){var _=m[t],k=_.bodyA,A=_.bodyB,S=_.pointA,C=_.pointB;k&&(S=l.add(k.position,_.pointA)),A&&(C=l.add(A.position,_.pointB)),S&&C&&((s.contains(e.bounds,S)||s.contains(e.bounds,C))&&x.push(_))}o.startViewTransform(e),e.mouse&&(u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),u.setOffset(e.mouse,e.bounds.min))}else x=m,v=g;!h.wireframes||n.enableSleeping&&h.showSleeping?o.bodies(e,v,p):(h.showConvexHulls&&o.bodyConvexHulls(e,v,p),o.bodyWireframes(e,v,p)),h.showBounds&&o.bodyBounds(e,v,p),(h.showAxes||h.showAngleIndicator)&&o.bodyAxes(e,v,p),h.showPositions&&o.bodyPositions(e,v,p),h.showVelocity&&o.bodyVelocity(e,v,p),h.showIds&&o.bodyIds(e,v,p),h.showSeparations&&o.separations(e,n.pairs.list,p),h.showCollisions&&o.collisions(e,n.pairs.list,p),h.showVertexNumbers&&o.vertexNumbers(e,v,p),h.showMousePosition&&o.mousePosition(e,e.mouse,p),o.constraints(x,p),h.showBroadphase&&n.broadphase.controller===c&&o.grid(e,n.broadphase,p),h.showDebug&&o.debug(e,p),h.hasBounds&&o.endViewTransform(e),a.trigger(e,"afterRender",b)},o.debug=function(e,t){var n=t,o=e.engine,r=o.world,s=o.metrics,a=e.options,l=i.allBodies(r);if(o.timing.timestamp-(e.debugTimestamp||0)>=500){var u="";s.timing&&(u+="fps: "+Math.round(s.timing.fps)+"    "),s.extended&&(s.timing&&(u+="delta: "+s.timing.delta.toFixed(3)+"    ",u+="correction: "+s.timing.correction.toFixed(3)+"    "),u+="bodies: "+l.length+"    ",o.broadphase.controller===c&&(u+="buckets: "+s.buckets+"    "),u+="\n",u+="collisions: "+s.collisions+"    ",u+="pairs: "+o.pairs.list.length+"    ",u+="broad: "+s.broadEff+"    ",u+="mid: "+s.midEff+"    ",u+="narrow: "+s.narrowEff+"    "),e.debugString=u,e.debugTimestamp=o.timing.timestamp}if(e.debugString){n.font="12px Arial",a.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var f=e.debugString.split("\n"),p=0;p<f.length;p++)n.fillText(f[p],50,50+18*p)}},o.constraints=function(e,t){for(var n=t,o=0;o<e.length;o++){var i=e[o];if(i.render.visible&&i.pointA&&i.pointB){var s,a,c=i.bodyA,u=i.bodyB;if(s=c?l.add(c.position,i.pointA):i.pointA,"pin"===i.render.type)n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath();else{if(a=u?l.add(u.position,i.pointB):i.pointB,n.beginPath(),n.moveTo(s.x,s.y),"spring"===i.render.type)for(var f,p=l.sub(a,s),d=l.perp(l.normalise(p)),h=Math.ceil(r.clamp(i.length/5,12,20)),g=1;g<h;g+=1)f=g%2==0?1:-1,n.lineTo(s.x+p.x*(g/h)+d.x*f*4,s.y+p.y*(g/h)+d.y*f*4);n.lineTo(a.x,a.y)}i.render.lineWidth&&(n.lineWidth=i.render.lineWidth,n.strokeStyle=i.render.strokeStyle,n.stroke()),i.render.anchors&&(n.fillStyle=i.render.strokeStyle,n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},o.bodyShadows=function(e,t,n){for(var o=n,r=(e.engine,0);r<t.length;r++){var i=t[r];if(i.render.visible){if(i.circleRadius)o.beginPath(),o.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI),o.closePath();else{o.beginPath(),o.moveTo(i.vertices[0].x,i.vertices[0].y);for(var s=1;s<i.vertices.length;s++)o.lineTo(i.vertices[s].x,i.vertices[s].y);o.closePath()}var a=i.position.x-.5*e.options.width,c=i.position.y-.2*e.options.height,l=Math.abs(a)+Math.abs(c);o.shadowColor="rgba(0,0,0,0.15)",o.shadowOffsetX=.05*a,o.shadowOffsetY=.05*c,o.shadowBlur=1+12*Math.min(1,l/1e3),o.fill(),o.shadowColor=null,o.shadowOffsetX=null,o.shadowOffsetY=null,o.shadowBlur=null}}},o.bodies=function(e,t,n){var o,r,i,s,a=n,c=(e.engine,e.options),l=c.showInternalEdges||!c.wireframes;for(i=0;i<t.length;i++)if((o=t[i]).render.visible)for(s=o.parts.length>1?1:0;s<o.parts.length;s++)if((r=o.parts[s]).render.visible){if(c.showSleeping&&o.isSleeping?a.globalAlpha=.5*r.render.opacity:1!==r.render.opacity&&(a.globalAlpha=r.render.opacity),r.render.sprite&&r.render.sprite.texture&&!c.wireframes){var u=r.render.sprite,f=p(e,u.texture);a.translate(r.position.x,r.position.y),a.rotate(r.angle),a.drawImage(f,f.width*-u.xOffset*u.xScale,f.height*-u.yOffset*u.yScale,f.width*u.xScale,f.height*u.yScale),a.rotate(-r.angle),a.translate(-r.position.x,-r.position.y)}else{if(r.circleRadius)a.beginPath(),a.arc(r.position.x,r.position.y,r.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(r.vertices[0].x,r.vertices[0].y);for(var d=1;d<r.vertices.length;d++)!r.vertices[d-1].isInternal||l?a.lineTo(r.vertices[d].x,r.vertices[d].y):a.moveTo(r.vertices[d].x,r.vertices[d].y),r.vertices[d].isInternal&&!l&&a.moveTo(r.vertices[(d+1)%r.vertices.length].x,r.vertices[(d+1)%r.vertices.length].y);a.lineTo(r.vertices[0].x,r.vertices[0].y),a.closePath()}c.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=r.render.fillStyle,r.render.lineWidth&&(a.lineWidth=r.render.lineWidth,a.strokeStyle=r.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},o.bodyWireframes=function(e,t,n){var o,r,i,s,a,c=n,l=e.options.showInternalEdges;for(c.beginPath(),i=0;i<t.length;i++)if((o=t[i]).render.visible)for(a=o.parts.length>1?1:0;a<o.parts.length;a++){for(r=o.parts[a],c.moveTo(r.vertices[0].x,r.vertices[0].y),s=1;s<r.vertices.length;s++)!r.vertices[s-1].isInternal||l?c.lineTo(r.vertices[s].x,r.vertices[s].y):c.moveTo(r.vertices[s].x,r.vertices[s].y),r.vertices[s].isInternal&&!l&&c.moveTo(r.vertices[(s+1)%r.vertices.length].x,r.vertices[(s+1)%r.vertices.length].y);c.lineTo(r.vertices[0].x,r.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},o.bodyConvexHulls=function(e,t,n){var o,r,i,s=n;for(s.beginPath(),r=0;r<t.length;r++)if((o=t[r]).render.visible&&1!==o.parts.length){for(s.moveTo(o.vertices[0].x,o.vertices[0].y),i=1;i<o.vertices.length;i++)s.lineTo(o.vertices[i].x,o.vertices[i].y);s.lineTo(o.vertices[0].x,o.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},o.vertexNumbers=function(e,t,n){var o,r,i,s=n;for(o=0;o<t.length;o++){var a=t[o].parts;for(i=a.length>1?1:0;i<a.length;i++){var c=a[i];for(r=0;r<c.vertices.length;r++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(o+"_"+r,c.position.x+.8*(c.vertices[r].x-c.position.x),c.position.y+.8*(c.vertices[r].y-c.position.y))}}},o.mousePosition=function(e,t,n){var o=n;o.fillStyle="rgba(255,255,255,0.8)",o.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},o.bodyBounds=function(e,t,n){var o=n,r=(e.engine,e.options);o.beginPath();for(var i=0;i<t.length;i++){if(t[i].render.visible)for(var s=t[i].parts,a=s.length>1?1:0;a<s.length;a++){var c=s[a];o.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}r.wireframes?o.strokeStyle="rgba(255,255,255,0.08)":o.strokeStyle="rgba(0,0,0,0.1)",o.lineWidth=1,o.stroke()},o.bodyAxes=function(e,t,n){var o,r,i,s,a=n,c=(e.engine,e.options);for(a.beginPath(),r=0;r<t.length;r++){var l=t[r],u=l.parts;if(l.render.visible)if(c.showAxes)for(i=u.length>1?1:0;i<u.length;i++)for(o=u[i],s=0;s<o.axes.length;s++){var f=o.axes[s];a.moveTo(o.position.x,o.position.y),a.lineTo(o.position.x+20*f.x,o.position.y+20*f.y)}else for(i=u.length>1?1:0;i<u.length;i++)for(o=u[i],s=0;s<o.axes.length;s++)a.moveTo(o.position.x,o.position.y),a.lineTo((o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}c.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},o.bodyPositions=function(e,t,n){var o,r,i,s,a=n,c=(e.engine,e.options);for(a.beginPath(),i=0;i<t.length;i++)if((o=t[i]).render.visible)for(s=0;s<o.parts.length;s++)r=o.parts[s],a.arc(r.position.x,r.position.y,3,0,2*Math.PI,!1),a.closePath();for(c.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),i=0;i<t.length;i++)(o=t[i]).render.visible&&(a.arc(o.positionPrev.x,o.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},o.bodyVelocity=function(e,t,n){var o=n;o.beginPath();for(var r=0;r<t.length;r++){var i=t[r];i.render.visible&&(o.moveTo(i.position.x,i.position.y),o.lineTo(i.position.x+2*(i.position.x-i.positionPrev.x),i.position.y+2*(i.position.y-i.positionPrev.y)))}o.lineWidth=3,o.strokeStyle="cornflowerblue",o.stroke()},o.bodyIds=function(e,t,n){var o,r,i=n;for(o=0;o<t.length;o++)if(t[o].render.visible){var s=t[o].parts;for(r=s.length>1?1:0;r<s.length;r++){var a=s[r];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(a.id,a.position.x+10,a.position.y-10)}}},o.collisions=function(e,t,n){var o,r,i,s,a=n,c=e.options;for(a.beginPath(),i=0;i<t.length;i++)if((o=t[i]).isActive)for(r=o.collision,s=0;s<o.activeContacts.length;s++){var l=o.activeContacts[s].vertex;a.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(c.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),i=0;i<t.length;i++)if((o=t[i]).isActive&&(r=o.collision,o.activeContacts.length>0)){var u=o.activeContacts[0].vertex.x,f=o.activeContacts[0].vertex.y;2===o.activeContacts.length&&(u=(o.activeContacts[0].vertex.x+o.activeContacts[1].vertex.x)/2,f=(o.activeContacts[0].vertex.y+o.activeContacts[1].vertex.y)/2),r.bodyB===r.supports[0].body||!0===r.bodyA.isStatic?a.moveTo(u-8*r.normal.x,f-8*r.normal.y):a.moveTo(u+8*r.normal.x,f+8*r.normal.y),a.lineTo(u,f)}c.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},o.separations=function(e,t,n){var o,r,i,s,a,c=n,l=e.options;for(c.beginPath(),a=0;a<t.length;a++)if((o=t[a]).isActive){i=(r=o.collision).bodyA;var u=1;(s=r.bodyB).isStatic||i.isStatic||(u=.5),s.isStatic&&(u=0),c.moveTo(s.position.x,s.position.y),c.lineTo(s.position.x-r.penetration.x*u,s.position.y-r.penetration.y*u),u=1,s.isStatic||i.isStatic||(u=.5),i.isStatic&&(u=0),c.moveTo(i.position.x,i.position.y),c.lineTo(i.position.x+r.penetration.x*u,i.position.y+r.penetration.y*u)}l.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},o.grid=function(e,t,n){var o=n;e.options.wireframes?o.strokeStyle="rgba(255,180,0,0.1)":o.strokeStyle="rgba(255,180,0,0.5)",o.beginPath();for(var i=r.keys(t.buckets),s=0;s<i.length;s++){var a=i[s];if(!(t.buckets[a].length<2)){var c=a.split(/C|R/);o.rect(.5+parseInt(c[1],10)*t.bucketWidth,.5+parseInt(c[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}o.lineWidth=1,o.stroke()},o.inspector=function(e,t){e.engine;var n,o=e.selected,r=e.render,i=r.options;if(i.hasBounds){var s=r.bounds.max.x-r.bounds.min.x,a=r.bounds.max.y-r.bounds.min.y,c=s/r.options.width,l=a/r.options.height;t.scale(1/c,1/l),t.translate(-r.bounds.min.x,-r.bounds.min.y)}for(var u=0;u<o.length;u++){var f=o[u].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),f.type){case"body":n=f.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var p=f.pointA;f.bodyA&&(p=f.pointB),t.beginPath(),t.arc(p.x,p.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),i.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},f=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},p=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},d=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":3,"../collision/Grid":7,"../core/Common":13,"../core/Events":15,"../core/Mouse":17,"../geometry/Bounds":21,"../geometry/Vector":22}],25:[function(e,t,n){"use strict";var o=e("./internal/create_program"),r=e("./internal/create_shader");function i(e,t){var n=r(e.vert,t.VERTEX_SHADER,t),i=r(e.frag,t.FRAGMENT_SHADER,t);this._program=o(n,i,t),this._gl=t,this._attributes={},this._uniforms={},this._attributeIndex=t.getProgramParameter(this._program,t.ACTIVE_ATTRIBUTES),this._uniformIndex=t.getProgramParameter(this._program,t.ACTIVE_UNIFORMS)}i.prototype={getAttribute:function(e){var t,n=this._attributes[e];if(n)return n;for(;--this._attributeIndex>=0;)if(t=this._gl.getActiveAttrib(this._program,this._attributeIndex),n={location:this._gl.getAttribLocation(this._program,e),name:t.name,size:t.size,type:t.type},this._attributes[n.name]=n,n.name===e)return n;throw ReferenceError('No "'+e+'" attribute found')},getUniform:function(e){var t,n,o=this._uniforms[e];if(o)return o;for(;--this._uniformIndex>=0;)if(n=this._gl.getActiveUniform(this._program,this._uniformIndex),o={location:this._gl.getUniformLocation(this._program,n.name),size:n.size,type:n.type},n.size>1&&~(t=n.name.indexOf("["))?o.name=n.name.slice(0,t):o.name=n.name,this._uniforms[o.name]=o,o.name===e)return o;throw ReferenceError('No "'+e+'" uniform found')},setAttribute:function(e,t,n,o,r,i){var s=this.getAttribute(e).location;return this._gl.enableVertexAttribArray(s),this._gl.vertexAttribPointer(s,t,n,o,r,i),this},setUniform:function(e,t){var n=this.getUniform(e),o=this._gl;switch(n.type){case o.BOOL:case o.INT:n.size>1?o.uniform1iv(n.location,t):o.uniform1i(n.location,t);break;case o.FLOAT:n.size>1?o.uniform1fv(n.location,t):o.uniform1f(n.location,t);break;case o.FLOAT_MAT2:o.uniformMatrix2fv(n.location,!1,t);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(n.location,!1,t);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(n.location,!1,t);break;case o.FLOAT_VEC2:n.size>1?o.uniform2fv(n.location,t):o.uniform2f(n.location,t[0],t[1]);break;case o.FLOAT_VEC3:n.size>1?o.uniform3fv(n.location,t):o.uniform3f(n.location,t[0],t[1],t[2]);break;case o.FLOAT_VEC4:n.size>1?o.uniform4fv(n.location,t):o.uniform4f(n.location,t[0],t[1],t[2],t[3]);break;default:throw TypeError('The uniform type is not supported ("'+e+'")')}return this},use:function(){return this._gl.useProgram(this._program),this},constructor:i},t.exports=i},{"./internal/create_program":38,"./internal/create_shader":39}],26:[function(e,t,n){"use strict";var o=e("light_emitter"),r=e("peako/timestamp"),i=e("peako/timer");function s(){var e=this;o.call(this),this.lastRequestAnimationFrameID=0,this.lastRequestTime=0,this.skippedTime=0,this.totalTime=0,this.running=!1,this.settings={},this.start=function t(n){var o,s;if(!e.running)return n||(e.lastRequestAnimationFrameID=i.request(t),e.lastRequestTime=r(),e.running=!0),this;if(!n)return this;for(o=Math.min(1,.001*(n-e.lastRequestTime)),e.skippedTime+=o,e.totalTime+=o,s=e.settings["frame time"];e.skippedTime>=s&&e.running;)e.skippedTime-=s,e.emit("update",s,n);return e.emit("render",o,n),e.lastRequestTime=n,e.lastRequestAnimationFrameID=i.request(t),this},this.set("FPS",60)}function a(e){return"frame time"!==e&&"FPS"!==e}s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.set=function(e,t){if(a(e))throw Error("Got unknown setting key: "+e);"FPS"===e?this.settings["frame time"]=1/t:"frame time"===e&&(this.settings.FPS=1/t),this.settings[e]=t},s.prototype.get=function(e){if(a(e))throw Error("Got unknown setting key: "+e);return this.settings[e]},s.prototype.clear=function(){return this.skippedTime=0,this},s.prototype.stop=function(){return this.running=!1,this},t.exports=s},{light_emitter:1,"peako/timer":109,"peako/timestamp":110}],27:[function(e,t,n){"use strict";var o=e("./math/mat3");function r(){this.matrix=o.identity(),this._index=-1,this._stack=[]}r.prototype={save:function(){++this._index<this._stack.length?o.copy(this._stack[this._index],this.matrix):this._stack.push(o.clone(this.matrix))},restore:function(){this._index>=0?o.copy(this.matrix,this._stack[this._index--]):o.setIdentity(this.matrix)},setTransform:function(e,t,n,r,i,s){o.setTransform(this.matrix,e,t,n,r,i,s)},translate:function(e,t){o.translate(this.matrix,e,t)},rotate:function(e){o.rotate(this.matrix,e)},scale:function(e,t){o.scale(this.matrix,e,t)},transform:function(e,t,n,r,i,s){o.transform(this.matrix,e,t,n,r,i,s)},constructor:r},t.exports=r},{"./math/mat3":42}],28:[function(e,t,n){"use strict";var o=e("peako/defaults"),r=e("./settings");function i(e){var t,n;e=o(r,e),this.settings=e.settings,e.renderer&&(this.renderer=e.renderer),this.settings.offset||(this.renderer?(t=.5*this.renderer.w,n=.5*this.renderer.h):(t=0,n=0),this.settings.offset={x:t,y:n}),this._destination=null,this._destinationKey=null,this._currentPosition={x:0,y:0}}function s(e,t,n){return e.settings.offset[n]/e.settings.zoom.value-t[n]}function a(e,t,n){var o=s(e,t,n),r=s(e,e._currentPosition,n);e._currentPosition[n]+=(r-o)*e.settings.speed[n]}i.prototype={_getDestination:function(){var e=this._destinationKey;return null===e?this._destination:this._destination[e]},set:function(e,t){for(var n=this.get(e),o=Object.keys(t),r=0,i=o.length;r<i;++r)n[o[r]]=t[o[r]]},get:function(e){return function(e){switch(e){case"zoom-out speed":case"zoom-in speed":case"offset":case"speed":case"zoom":return}throw Error("Got unknown setting key: "+e)}(e),this.settings[e]},lookAt:function(e,t){this._destination=e,this._destinationKey=void 0===t?null:t},shouldLookAt:function(){var e,t,n=this._getDestination();return null===n?(e=0,t=0):(e=n.x,t=n.y),{x:e,y:t}},update:function(){var e=this._getDestination();null!==e&&(a(this,e,"x"),a(this,e,"y"))},looksAt:function(){return{x:this._currentPosition.x,y:this._currentPosition.y}},apply:function(e){var t=this.settings.zoom.value,n=s(this,this._currentPosition,"x"),o=s(this,this._currentPosition,"y");(e||this.renderer).setTransform(t,0,0,t,t*n,t*o)},sees:function(e,t,n,o,r){var i=this.settings.zoom.value,s=this.settings.offset,a=this._currentPosition;if(r||(r=this.renderer),!r)throw Error("No renderer (camera.sees)");return e+n>a.x-s.x/i&&e<a.x+(r.w-s.x)/i&&t+o>a.y-s.y/i&&t<a.y+(r.h-s.y)/i},zoomOut:function(){var e,t=this.settings["zoom-out speed"],n=this.settings.zoom;n.value!==n.min&&(e=t.linear?t.value*n.value:t.value,n.value=Math.max(n.value-e,n.min))},zoomIn:function(){var e,t=this.settings["zoom-in speed"],n=this.settings.zoom;n.value!==n.max&&(e=t.linear?t.value*n.value:t.value,n.value=Math.min(n.value+e,n.max))},constructor:i},t.exports=i},{"./settings":29,"peako/defaults":80}],29:[function(e,t,n){"use strict";n.settings={"zoom-out speed":{value:1,linear:!0},"zoom-in speed":{value:1,linear:!0},zoom:{value:1,min:1,max:1},speed:{x:1,y:1}}},{}],30:[function(e,t,n){"use strict";t.exports=s;var o=e("peako/clamp"),r=e("./internal/parse"),i=e("./RGBA");function s(e,t,n,o){this.set(e,t,n,o)}function a(e,t,n){return e<1/6?Math.round(255*(t+6*(n-t)*e)):e<.5?Math.round(255*n):e<2/3?Math.round(255*(t+(n-t)*(2/3-e)*6)):Math.round(255*t)}s.prototype={perceivedBrightness:function(){return this.rgba().perceivedBrightness()},luminance:function(){return this.rgba().luminance()},brightness:function(){return this.rgba().brightness()},toString:function(){return"hsla("+this[0]+", "+this[1]+"%, "+this[2]+"%, "+this[3]+")"},set:function(e,t,n,o){switch(!0){case"string"==typeof e:e=r(e);case"object"==typeof e&&null!==e:e.type!==this.type&&(e=e[this.type]()),this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3];break;default:switch(void 0){case e:o=1,n=t=e=0;break;case t:o=1,n=Math.floor(e),t=e=0;break;case n:o=t,n=Math.floor(e),t=e=0;break;case o:o=1;default:e=Math.floor(e),t=Math.floor(t),n=Math.floor(n)}this[0]=e,this[1]=t,this[2]=n,this[3]=o}return this},rgba:function(){var e,t=new i,n=this[0]%360/360,o=.01*this[1],r=.01*this[2],s=n+1/3,c=n,l=n-1/3,u=2*r-(e=r<.5?r*(1+o):r+o-r*o);return s<0&&++s,c<0&&++c,l<0&&++l,s>1&&--s,c>1&&--c,l>1&&--l,t[0]=a(s,u,e),t[1]=a(c,u,e),t[2]=a(l,u,e),t[3]=this[3],t},lerp:function(e,t,n,o){var r=new s;return r[0]=e,r[1]=t,r[2]=n,this.lerpColor(r,o)},lerpColor:function(e,t){return this.rgba().lerpColor(e,t).hsla()},shade:function(e){var t=new s;return t[0]=this[0],t[1]=this[1],t[2]=o(this[2]+e,0,100),t[3]=this[3],t},constructor:s},s.prototype.type="hsla"},{"./RGBA":31,"./internal/parse":33,"peako/clamp":72}],31:[function(e,t,n){"use strict";t.exports=i;var o=e("./internal/parse"),r=e("./HSLA");function i(e,t,n,o){this.set(e,t,n,o)}i.prototype={perceivedBrightness:function(){var e=this[0],t=this[1],n=this[2];return Math.sqrt(.299*e*e+.587*t*t+.114*n*n)},luminance:function(){return.2126*this[0]+.7152*this[1]+.0722*this[2]},brightness:function(){return.299*this[0]+.587*this[1]+.114*this[2]},toString:function(){return"rgba("+this[0]+", "+this[1]+", "+this[2]+", "+this[3]+")"},set:function(e,t,n,r){switch(!0){case"string"==typeof e:e=o(e);case"object"==typeof e&&null!==e:e.type!==this.type&&(e=e[this.type]()),this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3];break;default:switch(void 0){case e:r=1,n=t=e=0;break;case t:r=1,n=t=e=Math.floor(e);break;case n:r=t,n=t=e=Math.floor(e);break;case r:r=1;default:e=Math.floor(e),t=Math.floor(t),n=Math.floor(n)}this[0]=e,this[1]=t,this[2]=n,this[3]=r}return this},hsla:function(){var e,t,n=new r,o=this[0]/255,i=this[1]/255,s=this[2]/255,a=Math.max(o,i,s),c=Math.min(o,i,s),l=50*(a+c),u=a-c;if(u){switch(t=l>50?u/(2-a-c):u/(a+c),a){case o:e=i<s?1.0472*(i-s)/u+6.2832:1.0472*(i-s)/u;break;case i:e=1.0472*(s-o)/u+2.0944;break;default:e=1.0472*(o-i)/u+4.1888}e=Math.round(360*e/6.2832),t=Math.round(100*t)}else e=t=0;return n[0]=e,n[1]=t,n[2]=Math.round(l),n[3]=this[3],n},rgba:function(){return this},lerp:function(e,t,n,o){return new i(e=this[0]+(e-this[0])*o,t=this[1]+(t-this[1])*o,n=this[2]+(n-this[2])*o,this[3])},lerpColor:function(e,t){var n,r,i;return"object"!=typeof e&&(e=o(e)),"rgba"!==e.type&&(e=e.rgba()),n=e[0],r=e[1],i=e[2],this.lerp(n,r,i,t)},shade:function(e){return this.hsla().shade(e).rgba()},constructor:i},i.prototype.type="rgba"},{"./HSLA":30,"./internal/parse":33}],32:[function(e,t,n){"use strict";t.exports={aliceblue:"f0f8ffff",antiquewhite:"faebd7ff",aqua:"00ffffff",aquamarine:"7fffd4ff",azure:"f0ffffff",beige:"f5f5dcff",bisque:"ffe4c4ff",black:"000000ff",blanchedalmond:"ffebcdff",blue:"0000ffff",blueviolet:"8a2be2ff",brown:"a52a2aff",burlywood:"deb887ff",cadetblue:"5f9ea0ff",chartreuse:"7fff00ff",chocolate:"d2691eff",coral:"ff7f50ff",cornflowerblue:"6495edff",cornsilk:"fff8dcff",crimson:"dc143cff",cyan:"00ffffff",darkblue:"00008bff",darkcyan:"008b8bff",darkgoldenrod:"b8860bff",darkgray:"a9a9a9ff",darkgreen:"006400ff",darkkhaki:"bdb76bff",darkmagenta:"8b008bff",darkolivegreen:"556b2fff",darkorange:"ff8c00ff",darkorchid:"9932ccff",darkred:"8b0000ff",darksalmon:"e9967aff",darkseagreen:"8fbc8fff",darkslateblue:"483d8bff",darkslategray:"2f4f4fff",darkturquoise:"00ced1ff",darkviolet:"9400d3ff",deeppink:"ff1493ff",deepskyblue:"00bfffff",dimgray:"696969ff",dodgerblue:"1e90ffff",feldspar:"d19275ff",firebrick:"b22222ff",floralwhite:"fffaf0ff",forestgreen:"228b22ff",fuchsia:"ff00ffff",gainsboro:"dcdcdcff",ghostwhite:"f8f8ffff",gold:"ffd700ff",goldenrod:"daa520ff",gray:"808080ff",green:"008000ff",greenyellow:"adff2fff",honeydew:"f0fff0ff",hotpink:"ff69b4ff",indianred:"cd5c5cff",indigo:"4b0082ff",ivory:"fffff0ff",khaki:"f0e68cff",lavender:"e6e6faff",lavenderblush:"fff0f5ff",lawngreen:"7cfc00ff",lemonchiffon:"fffacdff",lightblue:"add8e6ff",lightcoral:"f08080ff",lightcyan:"e0ffffff",lightgoldenrodyellow:"fafad2ff",lightgrey:"d3d3d3ff",lightgreen:"90ee90ff",lightpink:"ffb6c1ff",lightsalmon:"ffa07aff",lightseagreen:"20b2aaff",lightskyblue:"87cefaff",lightslateblue:"8470ffff",lightslategray:"778899ff",lightsteelblue:"b0c4deff",lightyellow:"ffffe0ff",lime:"00ff00ff",limegreen:"32cd32ff",linen:"faf0e6ff",magenta:"ff00ffff",maroon:"800000ff",mediumaquamarine:"66cdaaff",mediumblue:"0000cdff",mediumorchid:"ba55d3ff",mediumpurple:"9370d8ff",mediumseagreen:"3cb371ff",mediumslateblue:"7b68eeff",mediumspringgreen:"00fa9aff",mediumturquoise:"48d1ccff",mediumvioletred:"c71585ff",midnightblue:"191970ff",mintcream:"f5fffaff",mistyrose:"ffe4e1ff",moccasin:"ffe4b5ff",navajowhite:"ffdeadff",navy:"000080ff",oldlace:"fdf5e6ff",olive:"808000ff",olivedrab:"6b8e23ff",orange:"ffa500ff",orangered:"ff4500ff",orchid:"da70d6ff",palegoldenrod:"eee8aaff",palegreen:"98fb98ff",paleturquoise:"afeeeeff",palevioletred:"d87093ff",papayawhip:"ffefd5ff",peachpuff:"ffdab9ff",peru:"cd853fff",pink:"ffc0cbff",plum:"dda0ddff",powderblue:"b0e0e6ff",purple:"800080ff",red:"ff0000ff",rosybrown:"bc8f8fff",royalblue:"4169e1ff",saddlebrown:"8b4513ff",salmon:"fa8072ff",sandybrown:"f4a460ff",seagreen:"2e8b57ff",seashell:"fff5eeff",sienna:"a0522dff",silver:"c0c0c0ff",skyblue:"87ceebff",slateblue:"6a5acdff",slategray:"708090ff",snow:"fffafaff",springgreen:"00ff7fff",steelblue:"4682b4ff",tan:"d2b48cff",teal:"008080ff",thistle:"d8bfd8ff",tomato:"ff6347ff",turquoise:"40e0d0ff",violet:"ee82eeff",violetred:"d02090ff",wheat:"f5deb3ff",white:"ffffffff",whitesmoke:"f5f5f5ff",yellow:"ffff00ff",yellowgreen:"9acd32ff",transparent:"00000000"}},{}],33:[function(e,t,n){"use strict";t.exports=function(e){var t=s[e]||s[e=e.trim().toLowerCase()];if(!t){if(t=i[e])t=new f(l(t),o);else if((t=c.hex.exec(e))||(t=c.hex3.exec(e)))t=new f(l(function(e){var t,n,o,r;if(3===e.length)return e[1]+(e[2]||"ff");return t=e[1],n=e[2],o=e[3],r=e[4]||"f",t+t+n+n+o+o+r+r}(t)),o);else if(t=c.rgb.exec(e))t=new f(u(t),o);else{if(!(t=c.hsl.exec(e)))throw SyntaxError(e+" is not a valid syntax");t=new f(u(t),r)}s[e]=t}return new t.color(t[0],t[1],t[2],t[3])};var o=e("../RGBA"),r=e("../HSLA"),i=e("./colors"),s=Object.create(null),a=[0,0,0,0],c={hex3:/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/,hex:/^#([0-9a-f]{6})([0-9a-f]{2})?$/,rgb:/^rgb\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*\)$|^\s*rgba\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*\)$/,hsl:/^hsl\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\u0025\s*\)$|^\s*hsla\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\s*\)$/};function l(e){return 0==e?a:[(e=parseInt(e,16))>>24&255,e>>16&255,e>>8&255,(255&e)/255]}function u(e){return e[7]?[Number(e[4]),Number(e[5]),Number(e[6]),Number(e[7])]:[Number(e[1]),Number(e[2]),Number(e[3])]}function f(e,t){this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.color=t}},{"../HSLA":30,"../RGBA":31,"./colors":32}],34:[function(e,t,n){"use strict";var o={},r=0;function i(e){if(void 0!==o[e])throw Error("Cannot re-set (add) existing constant: "+e);o[e]=++r}["AUTO","GL","2D","LEFT","TOP","CENTER","MIDDLE","RIGHT","BOTTOM","PERCENT"].forEach(i),n.add=i,n.get=function(e){if(void 0===o[e])throw ReferenceError("Cannot get unknown constant: "+e);return o[e]}},{}],35:[function(e,t,n){"use strict";"function"==typeof Float32Array?t.exports=Float32Array:t.exports=Array},{}],36:[function(e,t,n){"use strict";"function"==typeof Float32Array?t.exports=function(e){return new Float32Array(e)}:t.exports=function(e){return e}},{}],37:[function(e,t,n){"use strict";var o=e("./_Float32Array");t.exports=function(e){for(var t=Math.floor(e),n=2*Math.PI/e,r=new o(2*t+2);t>=0;--t)r[2*t]=Math.cos(n*t),r[1+2*t]=Math.sin(n*t);return r}},{"./_Float32Array":35}],38:[function(e,t,n){"use strict";t.exports=function(e,t,n){var o=n.createProgram();if(n.attachShader(o,e),n.attachShader(o,t),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Unable to initialize the shader program: "+n.getProgramInfoLog(o));if(n.validateProgram(o),!n.getProgramParameter(o,n.VALIDATE_STATUS))throw Error("Unable to validate the shader program: "+n.getProgramInfoLog(o));return o}},{}],39:[function(e,t,n){"use strict";t.exports=function(e,t,n){var o=n.createShader(t);if(n.shaderSource(o,e),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))throw SyntaxError("An error occurred compiling the shaders: "+n.getShaderInfoLog(o));return o}},{}],40:[function(e,t,n){"use strict"},{}],41:[function(e,t,n){"use strict";var o,r,i=e("peako/noop");"undefined"!=typeof console&&console.warn?(o={},r=function(e){o[e]||(console.warn(e),o[e]=!0)}):r=i,t.exports=r},{"peako/noop":102}],42:[function(e,t,n){"use strict";n.identity=function(){return[1,0,0,0,1,0,0,0,1]},n.setIdentity=function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1},n.copy=function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]},n.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},n.translate=function(e,t,n){e[6]=t*e[0]+n*e[3]+e[6],e[7]=t*e[1]+n*e[4]+e[7],e[8]=t*e[2]+n*e[5]+e[8]},n.rotate=function(e,t){var n=e[0],o=e[1],r=e[2],i=e[3],s=e[4],a=e[5],c=Math.cos(t),l=Math.sin(t);e[0]=c*n+l*i,e[1]=c*o+l*s,e[2]=c*r+l*a,e[3]=c*i-l*n,e[4]=c*s-l*o,e[5]=c*a-l*r},n.scale=function(e,t,n){e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=n,e[4]*=n,e[5]*=n},n.transform=function(e,t,n,o,r,i,s){e[0]*=t,e[1]*=o,e[2]*=i,e[3]*=n,e[4]*=r,e[5]*=s,e[6]=0,e[7]=0},n.setTransform=function(e,t,n,o,r,i,s){e[0]=t,e[1]=n,e[3]=o,e[4]=r,e[6]=i,e[7]=s}},{}],43:[function(e,t,n){"use strict";var o=e("peako/get-element-w"),r=e("peako/get-element-h"),i=e("../constants"),s=e("../internal/create_polygon"),a=e("../internal/polygons"),c=e("./internal/set_default_drawing_settings"),l=e("./internal/get_webgl"),u=e("./internal/copy_drawing_settings"),f=e("./internal/process_rect_align").processRectAlignX,p=e("./internal/process_rect_align").processRectAlignY,d=e("./internal/process_shape"),h=e("./internal/close_shape"),g=e("./settings");function m(){throw Error("Cannot create an instance of the abstract class (new v6.AbstractRenderer)")}m.prototype={appendTo:function(e){return e.appendChild(this.canvas),this},destroy:function(){return this.canvas.parentNode.removeChild(this.canvas),this},push:function(){return this._stack[++this._stackIndex]?u(this._stack[this._stackIndex],this):this._stack.push(c({},this)),this},pop:function(){return this._stackIndex>=0?u(this,this._stack[this._stackIndex--]):c(this,this),this},resize:function(e,t){var n=this.canvas,o=this.settings.scale;return n.style.width=e+"px",n.style.height=t+"px",n.width=this.w=Math.floor(e*o),n.height=this.h=Math.floor(t*o),this},resizeTo:function(e){return this.resize(o(e),r(e))},drawPolygon:function(e,t,n,o,r,i,c){var l=a[n];return l||(l=a[n]=s(n)),c&&(i*=Math.PI/180),this.matrix.save(),this.matrix.translate(e,t),this.matrix.rotate(i),this.drawArrays(l,.5*l.length,void 0,o,r),this.matrix.restore(),this},polygon:function(e,t,n,o,r){return n%1&&(n=.01*Math.floor(100*n)),void 0===r?this.drawPolygon(e,t,n,o,o,.5*-Math.PI):this.drawPolygon(e,t,n,o,o,r,g.degrees),this},image:function(e,t,n,o,r){return e.get().loaded&&(void 0===o&&(o=e.dw),void 0===r&&(r=e.dh),t=f(this,t,o),t=p(this,n,r),this.drawImage(e,t,n,o,r)),this},beginShape:function(e){return e||(e={}),this._vertices.length=0,this._closedShape=null,void 0===e.drawFunction?this._drawFunction=null:this._drawFunction=e.drawFunction,this},vertex:function(e,t){return this._vertices.push(Math.floor(e),Math.floor(t)),this._closedShape=null,this},endShape:function(e){var t,n;if(e||(e={}),!(t=e.drawFunction||this._drawFunction))throw Error('No "drawFunction" specified for "renderer.endShape"');return e.close?(h(this),n=this._closedShape):n=this._vertices,t(this,d(this,n)),this},save:function(){return this.matrix.save(),this},restore:function(){return this.matrix.restore(),this},setTransform:function(e,t,n,o,r,i){return this.matrix.setTransform(e,t,n,o,r,i),this},translate:function(e,t){return this.matrix.translate(e,t),this},rotate:function(e){return this.settings.degrees&&(e*=Math.PI/180),this.matrix.rotate(e),this},scale:function(e,t){return this.matrix.scale(e,t),this},transform:function(e,t,n,o,r,i){return this.matrix.transform(e,t,n,o,r,i),this},lineWidth:function(e){return this._lineWidth=e,this},backgroundPositionX:function(e,t){if(void 0!==t&&t!==i.get("VALUE")){if(t===i.get("CONSTANT"))if(t=i.get("PERCENT"),e===i.get("LEFT"))e=0;else if(e===i.get("CENTER"))e=.5;else{if(e!==i.get("RIGHT"))throw Error("Got unknown value. The known are: LEFT, CENTER, RIGHT");e=1}if(t!==i.get("PERCENT"))throw Error("Got unknown `value` type. The known are: VALUE, PERCENT, CONSTANT");e*=this.w}return this._backgroundPositionX=e,this},backgroundPositionY:function(e,t){if(void 0!==t&&t!==i.get("VALUE")){if(t===i.get("CONSTANT"))if(t=i.get("PERCENT"),e===i.get("TOP"))e=0;else if(e===i.get("MIDDLE"))e=.5;else{if(e!==i.get("BOTTOM"))throw Error("Got unknown value. The known are: TOP, MIDDLE, BOTTOM");e=1}if(t!==i.get("PERCENT"))throw Error("Got unknown `value` type. The known are: VALUE, PERCENT, CONSTANT");e*=this.h}return this._backgroundPositionY=e,this},rectAlignX:function(e){if(e!==i.get("LEFT")&&e!==i.get("CENTER")&&e!==i.get("RIGHT"))throw Error("Got unknown `rectAlign` constant. The known are: LEFT, CENTER, RIGHT");return this._rectAlignX=e,this},rectAlignY:function(e){if(e!==i.get("LEFT")&&e!==i.get("CENTER")&&e!==i.get("RIGHT"))throw Error("Got unknown `rectAlign` constant. The known are: TOP, MIDDLE, BOTTOM");return this._rectAlignY=e,this},stroke:function(e,t,n,o){return"boolean"==typeof e?this._doStroke=e:("string"==typeof e||this._strokeColor.type!==this.settings.color.type?this._strokeColor=new this.settings.color(e,t,n,o):this._strokeColor.set(e,t,n,o),this._doStroke=!0),this},fill:function(e,t,n,o){return"boolean"==typeof e?this._doFill=e:("string"==typeof e||this._fillColor.type!==this.settings.color.type?this._fillColor=new this.settings.color(e,t,n,o):this._fillColor.set(e,t,n,o),this._doFill=!0),this},noStroke:function(){return this._doStroke=!1,this},noFill:function(){return this._doFill=!1,this},constructor:m},m.create=function(e,t,n){var o;if(t.canvas?e.canvas=t.canvas:(e.canvas=document.createElement("canvas"),e.canvas.innerHTML="Unable to run this application."),n===i.get("2D"))o="2d";else{if(n!==i.get("GL"))throw Error("Got unknown renderer type. The known are: 2D and GL");if(!(o=l()))throw Error("Cannot get WebGL context. Try to use 2D as the renderer type or v6.Renderer2D instead of v6.RendererGL")}e.context=e.canvas.getContext(o,{alpha:t.alpha}),e.settings=t.settings,e.type=n,e._stack=[],e._stackIndex=-1,e._vertices=[],e._closedShape=null,e._drawFunction=null,void 0===t.appendTo?e.appendTo(document.body):null!==t.appendTo&&e.appendTo(t.appendTo),"w"in t||"h"in t?e.resize(t.w||0,t.h||0):null!==t.appendTo?e.resizeTo(t.appendTo||document.body):e.resize(600,400),c(e,e)},t.exports=m},{"../constants":34,"../internal/create_polygon":37,"../internal/polygons":40,"./internal/close_shape":47,"./internal/copy_drawing_settings":48,"./internal/get_webgl":51,"./internal/process_rect_align":52,"./internal/process_shape":53,"./internal/set_default_drawing_settings":54,"./settings":55,"peako/get-element-h":83,"peako/get-element-w":84}],44:[function(e,t,n){"use strict";var o=e("peako/defaults"),r=e("../constants"),i=e("./internal/process_rect_align").processRectAlignX,s=e("./internal/process_rect_align").processRectAlignY,a=e("./AbstractRenderer"),c=e("./settings");function l(e){a.create(this,e=o(c,e),r.get("2D")),this.matrix=this.context}l.prototype=Object.create(a.prototype),l.prototype.constructor=l,l.prototype.backgroundColor=function(e,t,n,o){var r=this.settings,i=this.context;return i.save(),i.fillStyle=new r.color(e,t,n,o),i.setTransform(1,0,0,1,0,0),i.fillRect(0,0,this.w,this.h),i.restore(),this},l.prototype.backgroundImage=function(e){var t=this._rectAlignX,n=this._rectAlignY;return this._rectAlignX=r.get("CENTER"),this._rectAlignY=r.get("MIDDLE"),this.image(e,.5*this.w,.5*this.h),this._rectAlignX=t,this._rectAlignY=n,this},l.prototype.clear=function(){return this.context.clearRect(0,0,this.w,this.h),this},l.prototype.drawArrays=function(e,t,n,o,r){var i,s=this.context;if(t<2)return this;for(void 0===o&&(o=r=1),s.beginPath(),s.moveTo(e[0]*o,e[1]*r),i=2,t*=2;i<t;i+=2)s.lineTo(e[i]*o,e[i+1]*r);return this._doFill&&this._fill(),this._doStroke&&this._lineWidth>0&&this._stroke(),this},l.prototype.drawImage=function(e,t,n,o,r){return this.context.drawImage(e.get().image,e.sx,e.sy,e.sw,e.sh,t,n,o,r),this},l.prototype.rect=function(e,t,n,o){return e=i(this,e,n),t=s(this,t,o),this.context.beginPath(),this.context.rect(e,t,n,o),this._doFill&&this._fill(),this._doStroke&&this._lineWidth>0&&this._stroke(),this},l.prototype.arc=function(e,t,n){return this.context.beginPath(),this.context.arc(e,t,n,0,2*Math.PI),this._doFill&&this._fill(),this._doStroke&&this._lineWidth>0&&this._stroke(),this},l.prototype.line=function(e,t,n,o){return this.context.moveTo(e,t),this.context.lineTo(n,o),this._doStroke&&this._lineWidth>0&&this._stroke(),this},l.prototype._fill=function(){this.context.fillStyle=this._fillColor,this.context.fill()},l.prototype._stroke=function(){var e=this.context;e.strokeStyle=this._strokeColor,(e.lineWidth=this._lineWidth)<=1&&e.stroke(),e.stroke()},t.exports=l},{"../constants":34,"./AbstractRenderer":43,"./internal/process_rect_align":52,"./settings":55,"peako/defaults":80}],45:[function(e,t,n){"use strict";var o=e("peako/defaults"),r=e("../internal/create_array"),i=e("../ShaderProgram"),s=e("../Transform"),a=e("../constants"),c=e("../shaders"),l=e("./internal/process_rect_align").processRectAlignX,u=e("./internal/process_rect_align").processRectAlignY,f=e("./AbstractRenderer"),p=e("./settings"),d=r([0,0,1,0,1,1,0,1]);function h(e){f.create(this,e=o(p,e),a.get("GL")),this.matrix=new s,this.buffers={default:this.context.createBuffer(),rect:this.context.createBuffer()},this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffers.rect),this.context.bufferData(this.context.ARRAY_BUFFER,d,this.context.STATIC_DRAW),this.programs={default:new i(c.basic,this.context)},this.blending(e.blending)}h.prototype=Object.create(f.prototype),h.prototype.constructor=h,h.prototype.resize=function(e,t){return f.prototype.resize.call(this,e,t),this.context.viewport(0,0,this.w,this.h),this},h.prototype.blending=function(e){var t=this.context;return e?(t.enable(t.BLEND),t.disable(t.DEPTH_TEST),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.blendEquation(t.FUNC_ADD)):(t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL)),this},h.prototype._clear=function(e,t,n,o){var r=this.context;r.clearColor(e,t,n,o),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},h.prototype.backgroundColor=function(e,t,n,o){var r=new this.settings.color(e,t,n,o).rgba();return this._clear(r[0]/255,r[1]/255,r[2]/255,r[3]),this},h.prototype.clear=function(){return this._clear(0,0,0,0),this},h.prototype.drawArrays=function(e,t,n,o,r){var i=this.programs.default,s=this.context;return t<2?this:(e&&(void 0===n&&(n=s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.buffers.default),s.bufferData(s.ARRAY_BUFFER,e,n)),void 0!==o&&this.matrix.scale(o,r),i.use().setUniform("utransform",this.matrix.matrix).setUniform("ures",[this.w,this.h]).setAttribute("apos",2,s.FLOAT,!1,0,0),this._fill(t),this._stroke(t),this)},h.prototype._fill=function(e){this._doFill&&(this.programs.default.setUniform("ucolor",this._fillColor.rgba()),this.context.drawArrays(this.context.TRIANGLE_FAN,0,e))},h.prototype._stroke=function(e){this._doStroke&&this._lineWidth>0&&(this.programs.default.setUniform("ucolor",this._strokeColor.rgba()),this.context.lineWidth(this._lineWidth),this.context.drawArrays(this.context.LINE_LOOP,0,e))},h.prototype.arc=function(e,t,n){return this.drawPolygon(e,t,n,n,24,0)},h.prototype.line=function(e,t,n,o){return this.drawArrays(r([e,t,n,o]),2,this.context.STATIC_DRAW),this},h.prototype.rect=function(e,t,n,o){return e=l(this,e,n),t=u(this,t,o),this.matrix.save(),this.matrix.translate(e,t),this.matrix.scale(n,o),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffers.rect),this.drawArrays(null,4),this.matrix.restore(),this},t.exports=h},{"../ShaderProgram":25,"../Transform":27,"../constants":34,"../internal/create_array":36,"../shaders":56,"./AbstractRenderer":43,"./internal/process_rect_align":52,"./settings":55,"peako/defaults":80}],46:[function(e,t,n){"use strict";var o=e("../constants"),r=e("../internal/report"),i=e("./internal/get_renderer_type"),s=e("./internal/get_webgl"),a=e("./RendererGL"),c=e("./Renderer2D"),l=e("./settings").type;t.exports=function(e){var t=e&&e.type||l;if(t===o.get("AUTO")&&(t=i()),t===o.get("GL")){if(s())return new a(e);r("Cannot create WebGL context. Falling back to 2D.")}if(t===o.get("2D")||t===o.get("GL"))return new c(e);throw Error("Got unknown renderer type. The known are: 2D and GL")}},{"../constants":34,"../internal/report":41,"./Renderer2D":44,"./RendererGL":45,"./internal/get_renderer_type":50,"./internal/get_webgl":51,"./settings":55}],47:[function(e,t,n){"use strict";t.exports=function(e){e._closedShape||(e._closedShape=e._vertices.slice(),e._closedShape.push(e._closedShape[0]))}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t,n){return n&&(e._fillColor[0]=t._fillColor[0],e._fillColor[1]=t._fillColor[1],e._fillColor[2]=t._fillColor[2],e._fillColor[3]=t._fillColor[3],e._strokeColor[0]=t._strokeColor[0],e._strokeColor[1]=t._strokeColor[1],e._strokeColor[2]=t._strokeColor[2],e._strokeColor[3]=t._strokeColor[3]),e._backgroundPositionX=t._backgroundPositionX,e._backgroundPositionY=t._backgroundPositionY,e._rectAlignX=t._rectAlignX,e._rectAlignY=t._rectAlignY,e._lineWidth=t._lineWidth,e._doStroke=t._doStroke,e._doFill=t._doFill,e}},{}],49:[function(e,t,n){"use strict";var o=e("../../constants"),r={_backgroundPositionX:o.get("LEFT"),_backgroundPositionY:o.get("TOP"),_rectAlignX:o.get("LEFT"),_rectAlignY:o.get("TOP"),_lineWidth:2,_doStroke:!0,_doFill:!0};t.exports=r},{"../../constants":34}],50:[function(e,t,n){"use strict";var o,r=e("peako/once"),i=e("../../constants");if(void 0===o)try{o=e("platform")}catch(e){}t.exports=r(function(){var e,t;return o&&(t=o.os&&"iOS"===o.os.family&&"Safari"===o.name),"undefined"!=typeof window&&(e="ontouchend"in window),e&&!t?i.get("GL"):i.get("2D")})},{"../../constants":34,"peako/once":104,platform:"platform"}],51:[function(e,t,n){"use strict";var o=e("peako/once");t.exports=o(function(){var e=document.createElement("canvas"),t=null;return e.getContext("webgl")?t="webgl":e.getContext("experimental-webgl")&&(t="experimental-webgl"),e=null,t})},{"peako/once":104}],52:[function(e,t,n){"use strict";var o=e("../../constants");n.processRectAlignX=function(e,t,n){if(e._rectAlignX===o.get("CENTER"))t-=.5*n;else if(e._rectAlignX===o.get("RIGHT"))t-=n;else if(e._rectAlignX!==o.get("LEFT"))throw Error('Unknown " +rectAlignX": '+e._rectAlignX);return Math.floor(t)},n.processRectAlignY=function(e,t,n){if(e._rectAlignY===o.get("MIDDLE"))t-=.5*n;else if(e._rectAlignY===o.get("BOTTOM"))t-=n;else if(e._rectAlignY!==o.get("TOP"))throw Error('Unknown " +rectAlignY": '+e._rectAlignY);return Math.floor(t)}},{"../../constants":34}],53:[function(e,t,n){"use strict";var o=e("../../constants").get("GL");t.exports=function(e,t){return e.type!==o||"function"!=typeof Float32Array||t instanceof Float32Array||(t=new Float32Array(t)),t}},{"../../constants":34}],54:[function(e,t,n){"use strict";var o=e("./default_drawing_settings"),r=e("./copy_drawing_settings");t.exports=function(e,t){return r(e,o),e._strokeColor=new t.settings.color,e._fillColor=new t.settings.color,e}},{"./copy_drawing_settings":48,"./default_drawing_settings":49}],55:[function(e,t,n){"use strict";var o=e("../color/RGBA"),r=e("../constants").get("2D");n.settings={color:o,scale:1},n.antialias=!0,n.blending=!0,n.degrees=!1,n.alpha=!0,n.type=r},{"../color/RGBA":31,"../constants":34}],56:[function(e,t,n){"use strict";t.exports={basic:{vert:"precision mediump float;attribute vec2 apos;uniform vec2 ures;uniform mat3 utransform;void main(){gl_Position=vec4(((utransform*vec3(apos,1.0)).xy/ures*2.0-1.0)*vec2(1,-1),0,1);}",frag:"precision mediump float;uniform vec4 ucolor;void main(){gl_FragColor=vec4(ucolor.rgb/255.0,ucolor.a);}"},background:{vert:"precision mediump float;attribute vec2 apos;void main(){gl_Position = vec4(apos,0,1);}",frag:"precision mediump float;uniform vec4 ucolor;void main(){gl_FragColor=ucolor;}"}}},{}],57:[function(e,t,n){"use strict";var o=Object.prototype.toString;t.exports=function(e,t){throw Error('"'+o.call(e)+'" is not '+t)}},{}],58:[function(e,t,n){"use strict";var o,r=e("./type"),i="undefined";t.exports=function(e){return e===o?i:i=r(o=e)}},{"./type":113}],59:[function(e,t,n){"use strict";t.exports=function(e){return e.replace(/\\(\\)?/g,"$1")}},{}],60:[function(e,t,n){"use strict";var o,r=e("../isset"),i=Object.prototype.__defineGetter__,s=Object.prototype.__defineSetter__;t.exports=function(e,t,n){var a,c,l=r("get",n),u=r("set",n);if(l||u){if(l&&"function"!=typeof(a=n.get))throw TypeError("Getter must be a function: "+a);if(u&&"function"!=typeof(c=n.set))throw TypeError("Setter must be a function: "+c);if(r("writable",n))throw TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");if(!i)throw Error("Cannot define getter or setter");l&&i.call(e,t,a),u&&s.call(e,t,c)}else r("value",n)?e[t]=n.value:r(t,e)||(e[t]=o);return e}},{"../isset":97}],61:[function(e,t,n){"use strict";t.exports=function(e,t){var n,o=[];for(e.lastIndex=0;n=e.exec(t);)o.push(n);return o}},{}],62:[function(e,t,n){"use strict";var o=e("../call-iteratee"),r=e("../isset");t.exports=function(e,t,n,i){var s,a,c;for(s=-1,a=e.length-1;a>=0&&(c=i?a:++s,!r(c,e)||!1!==o(t,n,e[c],c,e));--a);return e}},{"../call-iteratee":70,"../isset":97}],63:[function(e,t,n){"use strict";var o=e("../call-iteratee");t.exports=function(e,t,n,r,i){var s,a,c;for(s=-1,a=i.length-1;a>=0&&(c=r?i[a]:i[++s],!1!==o(t,n,e[c],c,e));--a);return e}},{"../call-iteratee":70}],64:[function(e,t,n){"use strict";var o=e("../isset");t.exports=function(e,t,n){for(var r,i=t.length-n,s=0;s<i;++s){if(r=t[s],!o(r,e))return;e=e[r]}return e}},{"../isset":97}],65:[function(e,t,n){"use strict";var o=e("./base-to-index"),r=Array.prototype.indexOf,i=Array.prototype.lastIndexOf;t.exports=function(e,t,n,s){var a,c,l,u,f;if(t==t&&(u=s?i:r))return u.call(e,t,n);if(!(a=e.length))return-1;for(l=a-1,void 0!==n?(n=o(n,a),c=(l=s?Math.min(l,n):Math.max(0,n))-1):c=-1;l>=0;--l)if((f=e[u=s?l:++c])===t||t!=t&&f!=f)return u;return-1}},{"./base-to-index":68}],66:[function(e,t,n){"use strict";var o,r,i=e("./base-index-of"),s=e("../support/support-keys"),a=Object.prototype.hasOwnProperty;"not-supported"===s&&(o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=function(e,t){var n,r;for(n=o.length-1;n>=0;--n)i(e,r=o[n])<0&&a.call(t,r)&&e.push(r);return e}),t.exports=function(e){var t,n=[];for(t in e)a.call(e,t)&&n.push(t);return"not-supported"!==s?n:r(n,e)}},{"../support/support-keys":108,"./base-index-of":65}],67:[function(e,t,n){"use strict";var o=e("./base-get");t.exports=function(e,t){if(null!=e)return t.length>1?o(e,t,0):e[t[0]]}},{"./base-get":64}],68:[function(e,t,n){"use strict";t.exports=function(e,t){return t&&e?(e<0&&(e+=t),e||0):0}},{}],69:[function(e,t,n){"use strict";var o=e("./_throw-argument-exception"),r=e("./default-to");t.exports=function(e,t){var n;return"function"!=typeof t&&o(t,"a function"),e=r(e,1),function(){return--e>=0&&(n=t.apply(this,arguments)),n}}},{"./_throw-argument-exception":57,"./default-to":79}],70:[function(e,t,n){"use strict";t.exports=function(e,t,n,o,r){return void 0===t?e(n,o,r):e.call(t,n,o,r)}},{}],71:[function(e,t,n){"use strict";var o=e("./base/base-exec"),r=e("./_unescape"),i=e("./is-key"),s=e("./to-key"),a=e("./_type"),c=/(^|\.)\s*([_a-z]\w*)\s*|\[\s*((?:-)?(?:\d+|\d*\.\d+)|("|')(([^\\]\\(\\\\)*|[^\4])*)\4)\s*\]/gi;t.exports=function(e){var t,n,l;if(i(e))return[s(e)];if("array"===a(e))for(t=Array(n=e.length),l=n-1;l>=0;--l)t[l]=s(e[l]);else t=function(e){for(var t,n=o(c,e),i=n.length-1;i>=0;--i)(t=n[i])[2]?n[i]=t[2]:null!=t[5]?n[i]=r(t[5]):n[i]=t[3];return n}(""+e);return t}},{"./_type":58,"./_unescape":59,"./base/base-exec":61,"./is-key":89,"./to-key":111}],72:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e>=n?n:e<=t?t:e}},{}],73:[function(e,t,n){"use strict";var o=e("./create"),r=e("./get-prototype-of"),i=e("./to-object"),s=e("./each"),a=e("./is-object-like");t.exports=function e(t,n,c){var l;return(void 0===n||c)&&(n=t,t=!0),l=o(r(n=i(n))),s(n,function(n,o,r){n===r?this[o]=this:t&&a(n)?this[o]=e(t,n):this[o]=n},l),l}},{"./create":75,"./each":82,"./get-prototype-of":85,"./is-object-like":91,"./to-object":112}],74:[function(e,t,n){"use strict";t.exports={ERR:{INVALID_ARGS:"Invalid arguments",FUNCTION_EXPECTED:"Expected a function",STRING_EXPECTED:"Expected a string",UNDEFINED_OR_NULL:"Cannot convert undefined or null to object",REDUCE_OF_EMPTY_ARRAY:"Reduce of empty array with no initial value",NO_PATH:"No path was given"},MAX_ARRAY_LENGTH:4294967295,MAX_SAFE_INT:9007199254740991,MIN_SAFE_INT:-9007199254740991,DEEP:1,DEEP_KEEP_FN:2,PLACEHOLDER:{}}},{}],75:[function(e,t,n){"use strict";var o=e("./define-properties"),r=e("./set-prototype-of"),i=e("./is-primitive");function s(){}t.exports=Object.create||function(e,t){var n;if(null!==e&&i(e))throw TypeError("Object prototype may only be an Object or null: "+e);return s.prototype=e,n=new s,s.prototype=null,null===e&&r(n,null),arguments.length>=2&&o(n,t),n}},{"./define-properties":81,"./is-primitive":94,"./set-prototype-of":106}],76:[function(e,t,n){"use strict";var o=e("../base/base-for-each"),r=e("../base/base-for-in"),i=e("../is-array-like"),s=e("../to-object"),a=e("../iteratee").iteratee,c=e("../keys");t.exports=function(e){return function(t,n,l){return t=s(t),n=a(n),i(t)?o(t,n,l,e):r(t,n,l,e,c(t))}}},{"../base/base-for-each":62,"../base/base-for-in":63,"../is-array-like":87,"../iteratee":98,"../keys":99,"../to-object":112}],77:[function(e,t,n){"use strict";t.exports=function(e){return function(t){var n,o,r;return t.window===t?n=Math.max(t["inner"+e]||0,t.document.documentElement["client"+e]):9===t.nodeType?(o=t.body,r=t.documentElement,n=Math.max(o["scroll"+e],r["scroll"+e],o["offset"+e],r["offset"+e],o["client"+e],r["client"+e])):n=t["client"+e],n}}},{}],78:[function(e,t,n){"use strict";var o=e("../cast-path"),r=e("../noop");t.exports=function(e,t){return function(n){var i;return(n=o(n)).length?(t&&(i=Array.prototype.slice.call(arguments,1)),function(t){return e(t,n,i)}):r}}},{"../cast-path":71,"../noop":102}],79:[function(e,t,n){"use strict";t.exports=function(e,t){return null!=e&&e==e?e:t}},{}],80:[function(e,t,n){"use strict";var o=e("./mixin"),r=e("./clone");t.exports=function(e,t){return null==t?r(!0,e):o(!0,r(!0,e),t)}},{"./clone":73,"./mixin":101}],81:[function(e,t,n){"use strict";var o,r,i,s,a=e("./support/support-define-property");"full"!==a?(i=e("./is-primitive"),s=e("./each"),r=e("./base/base-define-property"),o=function(e,t){if("not-supported"!==a)try{return Object.defineProperties(e,t)}catch(e){}if(i(e))throw TypeError("defineProperties called on non-object");if(i(t))throw TypeError("Property description must be an object: "+t);return s(t,function(e,t){if(i(e))throw TypeError("Property description must be an object: "+e);r(this,t,e)},e),e}):o=Object.defineProperties,t.exports=o},{"./base/base-define-property":60,"./each":82,"./is-primitive":94,"./support/support-define-property":107}],82:[function(e,t,n){"use strict";t.exports=e("./create/create-each")()},{"./create/create-each":76}],83:[function(e,t,n){"use strict";t.exports=e("./create/create-get-element-dimension")("Height")},{"./create/create-get-element-dimension":77}],84:[function(e,t,n){"use strict";t.exports=e("./create/create-get-element-dimension")("Width")},{"./create/create-get-element-dimension":77}],85:[function(e,t,n){"use strict";var o=e("./constants").ERR,r=Object.prototype.toString;t.exports=Object.getPrototypeOf||function(e){var t;if(null==e)throw TypeError(o.UNDEFINED_OR_NULL);return void 0!==(t=e.__proto__)?t:"[object Function]"===r.call(e.constructor)?e.constructor.prototype:e}},{"./constants":74}],86:[function(e,t,n){"use strict";var o=e("./is-object-like"),r=e("./is-length"),i=e("./is-window-like");t.exports=function(e){return o(e)&&r(e.length)&&!i(e)}},{"./is-length":90,"./is-object-like":91,"./is-window-like":96}],87:[function(e,t,n){"use strict";var o=e("./is-length"),r=e("./is-window-like");t.exports=function(e){return null!=e&&("object"==typeof e?o(e.length)&&!r(e):"string"==typeof e)}},{"./is-length":90,"./is-window-like":96}],88:[function(e,t,n){"use strict";var o=e("./is-object-like"),r=e("./is-length"),i={}.toString;t.exports=Array.isArray||function(e){return o(e)&&r(e.length)&&"[object Array]"===i.call(e)}},{"./is-length":90,"./is-object-like":91}],89:[function(e,t,n){"use strict";var o=e("./_type"),r=/(^|[^\\])(\\\\)*(\.|\[)/;t.exports=function(e){var t;return!e||"array"!==o(e)&&("number"==(t=typeof e)||"boolean"===t||"symbol"===o(e)||!r.test(e))}},{"./_type":58}],90:[function(e,t,n){"use strict";var o=e("./constants").MAX_ARRAY_LENGTH;t.exports=function(e){return"number"==typeof e&&e>=0&&e<=o&&e%1==0}},{"./constants":74}],91:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&"object"==typeof e}},{}],92:[function(e,t,n){"use strict";var o=e("./is-object-like"),r={}.toString;t.exports=function(e){return o(e)&&"[object Object]"===r.call(e)}},{"./is-object-like":91}],93:[function(e,t,n){"use strict";var o=e("./get-prototype-of"),r=e("./is-object"),i=Object.prototype.hasOwnProperty,s=Function.prototype.toString,a=s.call(Object);t.exports=function(e){var t,n;return!!r(e)&&(null===(t=o(e))||!!i.call(t,"constructor")&&("function"==typeof(n=t.constructor)&&s.call(n)===a))}},{"./get-prototype-of":85,"./is-object":92}],94:[function(e,t,n){"use strict";t.exports=function(e){return!e||"object"!=typeof e&&"function"!=typeof e}},{}],95:[function(e,t,n){"use strict";var o=e("./type");t.exports=function(e){return"symbol"===o(e)}},{"./type":113}],96:[function(e,t,n){"use strict";var o=e("./is-object-like");t.exports=function(e){return o(e)&&e.window===e}},{"./is-object-like":91}],97:[function(e,t,n){"use strict";t.exports=function(e,t){return null!=t&&(void 0!==t[e]||e in t)}},{}],98:[function(e,t,n){"use strict";var o=e("./is-array-like-object"),r=e("./matches-property"),i=e("./property");n.iteratee=function(e){return"function"==typeof e?e:o(e)?r(e):i(e)}},{"./is-array-like-object":86,"./matches-property":100,"./property":105}],99:[function(e,t,n){"use strict";var o=e("./base/base-keys"),r=e("./to-object"),i=e("./support/support-keys");t.exports="es2015"!==i?function(e){return("es5"===i?Object.keys:o)(r(e))}:Object.keys},{"./base/base-keys":66,"./support/support-keys":108,"./to-object":112}],100:[function(e,t,n){"use strict";var o=e("./cast-path"),r=e("./base/base-get"),i=e("./constants").ERR;t.exports=function(e){var t=o(e[0]),n=e[1];if(!t.length)throw Error(i.NO_PATH);return function(e){return null!=e&&(t.length>1?r(e,t,0)===n:e[t[0]]===n)}}},{"./base/base-get":64,"./cast-path":71,"./constants":74}],101:[function(e,t,n){"use strict";var o=e("./is-plain-object"),r=e("./to-object"),i=e("./is-array"),s=e("./keys");t.exports=function e(t,n){var a,c,l,u,f,p,d,h,g=arguments.length,m=2;for("boolean"!=typeof t&&(n=t,t=!0,m=1),m===g&&(n=this,--m),n=r(n);m<g;++m)for(l=0,u=(a=s(c=r(arguments[m]))).length;l<u;++l)f=c[p=a[l]],t&&f!==c&&(o(f)||(d=i(f)))?(h=n[p],d?(i(h)||(h=[]),d=!1):o(h)||(h={}),n[p]=e(!0,h,f)):n[p]=f;return n}},{"./is-array":88,"./is-plain-object":93,"./keys":99,"./to-object":112}],102:[function(e,t,n){"use strict";t.exports=function(){}},{}],103:[function(e,t,n){"use strict";t.exports=Date.now||function(){return(new Date).getTime()}},{}],104:[function(e,t,n){"use strict";var o=e("./before");t.exports=function(e){return o(1,e)}},{"./before":69}],105:[function(e,t,n){"use strict";t.exports=e("./create/create-property")(e("./base/base-property"))},{"./base/base-property":67,"./create/create-property":78}],106:[function(e,t,n){"use strict";var o=e("./is-primitive"),r=e("./constants").ERR;t.exports=Object.setPrototypeOf||function(e,t){if(null==e)throw TypeError(r.UNDEFINED_OR_NULL);if(null!==t&&o(t))throw TypeError("Object prototype may only be an Object or null: "+t);return"__proto__"in e&&(e.__proto__=t),e}},{"./constants":74,"./is-primitive":94}],107:[function(e,t,n){"use strict";var o;function r(e){try{if(""in Object.defineProperty(e,"",{}))return!0}catch(e){}return!1}o=r({})?"full":"undefined"!=typeof document&&r(document.createElement("span"))?"dom":"not-supported",t.exports=o},{}],108:[function(e,t,n){"use strict";var o;if(Object.keys)try{o=Object.keys("")}catch(e){o="es5"}else o={toString:null}.propertyIsEnumerable("toString")?"not-supported":"has-a-bug";t.exports=o},{}],109:[function(e,t,n){"use strict";var o,r,i=e("./timestamp");if("undefined"!=typeof window&&(r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),!o||!r||"undefined"!=typeof navigator&&/iP(ad|hone|od).*OS\s6/.test(navigator.userAgent)){var s=0;n.request=function(e){var t=i(),n=Math.max(s+1e3/60,t);return setTimeout(function(){s=n,e(t)},n-t)},n.cancel=clearTimeout}else n.request=function(e){return o(e)},n.cancel=function(e){return r(e)}},{"./timestamp":110}],110:[function(e,t,n){"use strict";var o,r=e("./now");"undefined"!=typeof performance&&performance.now?t.exports=function(){return performance.now()}:(o=r(),t.exports=function(){return r()-o})},{"./now":103}],111:[function(e,t,n){"use strict";var o=e("./_unescape"),r=e("./is-symbol");t.exports=function(e){var t;return"string"==typeof e?o(e):r(e)?e:"0"===(t=""+e)&&1/e==-1/0?"-0":o(t)}},{"./_unescape":59,"./is-symbol":95}],112:[function(e,t,n){"use strict";var o=e("./constants").ERR;t.exports=function(e){if(null==e)throw TypeError(o.UNDEFINED_OR_NULL);return Object(e)}},{"./constants":74}],113:[function(e,t,n){"use strict";var o=e("./create"),r={}.toString,i=o(null);t.exports=function(e){var t,n;return null===e?"null":"object"!==(t=typeof e)&&"function"!==t?t:(t=i[n=r.call(e)])||(i[n]=n.slice(8,-1).toLowerCase())}},{"./create":75}],114:[function(e,t,n){"use strict";function o(){throw Error("Cannot create an instance of the abstract class (new AbstractMatterBody)")}Object.defineProperty(o.prototype,"x",{get:function(){return this.body.position.x}}),Object.defineProperty(o.prototype,"y",{get:function(){return this.body.position.y}}),t.exports=o},{}],115:[function(e,t,n){"use strict";var o=e("light_emitter");function r(){var e=this;function t(t){e.emit("touchstart",t,!t.type.indexOf("key"))}function n(t){e.emit("touchend",t,!t.type.indexOf("key"))}o.apply(this,arguments),window.addEventListener("touchstart",t),window.addEventListener("mousedown",t),window.addEventListener("keydown",function(e){32===e.which&&t(e)}),window.addEventListener("touchend",n),window.addEventListener("mouseup",n),window.addEventListener("keyup",function(e){32===e.which&&n(e)})}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t.exports=r},{light_emitter:1}],116:[function(e,t,n){"use strict";var o=e("matter-js/src/factory/Bodies"),r=e("./AbstractMatterBody");function i(e,t){this.radius=20,this.body=o.circle(e,t,this.radius)}i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.render=function(e){e.push(),e.fill(0,.12),e.save(),e.translate(8,-8),e.arc(this.x,this.y,e.settings.scale*this.radius),e.restore(),e.pop(),e.arc(this.x,this.y,e.settings.scale*this.radius)},t.exports=i},{"./AbstractMatterBody":114,"matter-js/src/factory/Bodies":19}],117:[function(e,t,n){(function(n){"use strict";var o=e("light_emitter"),r=e("v6.js/core/camera/Camera"),i=e("./Controls"),s=e("./FlappyShape"),a=e("./Pipe");function c(){o.apply(this,arguments),this.controls=new i,this.shapes=[new s(0,0)],this.pipes=[new a(0,0)],this.camera=new r({settings:{speed:{x:.1,y:.1}}}),this.camera.lookAt(this.shapes,"0")}c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.render=function(e){var t;for(this.camera.apply(e),e.fill("lime"),t=this.pipes.length-1;t>=0;--t)this.pipes[t].render(e);for(e.fill(n.fs||"lightpink"),t=this.shapes.length-1;t>=0;--t)this.shapes[t].render(e)},t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Controls":115,"./FlappyShape":116,"./Pipe":118,light_emitter:1,"v6.js/core/camera/Camera":28}],118:[function(e,t,n){"use strict";var o=e("matter-js/src/factory/Bodies"),r=e("./AbstractMatterBody");function i(e,t,n){this.w=100,this.h=n,this.body=o.rectangle(e,t,this.w,this.h)}i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.render=function(e){e.rect(this.body.position.x,this.body.position.y,e.settings.scale*this.w,e.settings.scale*this.h)},t.exports=i},{"./AbstractMatterBody":114,"matter-js/src/factory/Bodies":19}],119:[function(e,t,n){(function(t){"use strict";var n=e("matter-js/src/body/Composite"),o=e("matter-js/src/core/Engine"),r=e("matter-js/src/body/Body"),i=e("./objects/renderer"),s=e("./objects/ticker"),a=e("./objects/engine"),c=e("./objects/game"),l=!0,u=!1;[].concat(c.shapes,c.pipes).forEach(function(e){n.add(a.world,e.body)}),t.temp1=c.shapes[0].body,c.controls.on("touchstart",function(e,t){t&&!l||(l=!1,u=!0)}),c.controls.on("touchend",function(e,t){t&&(l=!0)}),s.on("update",function(e){u&&(u=!1,r.applyForce(c.shapes[0].body,{x:0,y:0},{x:0,y:5*-e})),o.update(a,1e3*e),c.camera.update()}),s.on("render",function(){i.backgroundColor(t.bg||"powderblue"),c.render(i)}),s.start(),self.addEventListener("resize",function(){i.resizeTo(i.canvas.parentNode),c.camera.set("offset",{x:i.w/2,y:i.h/2})}),c.camera.set("offset",{x:i.w/2,y:i.h/2})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./objects/engine":120,"./objects/game":121,"./objects/renderer":122,"./objects/ticker":123,"matter-js/src/body/Body":2,"matter-js/src/body/Composite":3,"matter-js/src/core/Engine":14}],120:[function(e,t,n){"use strict";var o=e("matter-js/src/core/Engine");t.exports=o.create({enableSleeping:!0})},{"matter-js/src/core/Engine":14}],121:[function(e,t,n){"use strict";var o=e("../core/Game");t.exports=new o},{"../core/Game":117}],122:[function(e,t,n){"use strict";var o=e("v6.js/core/renderer/create_renderer"),r=e("v6.js/core/constants");t.exports=o({type:r.get("AUTO")}).noStroke()},{"v6.js/core/constants":34,"v6.js/core/renderer/create_renderer":46}],123:[function(e,t,n){"use strict";var o=e("v6.js/core/Ticker");t.exports=new o},{"v6.js/core/Ticker":26}]},{},[119]);